#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ç ”æŠ¥ç”Ÿæˆæµç¨‹
åŸºäºPostgreSQLæ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œç”Ÿæˆæ·±åº¦ç ”æŠ¥å¹¶è¾“å‡ºä¸ºmarkdownæ ¼å¼
"""
import logging
import os
from datetime import datetime
from pathlib import Path
from typing import Optional, List, Dict, Any

from dotenv import load_dotenv


from company.agent.agent_factory import OutlineAgentFactory, OutlineAgentType
from company.model.report_info import ReportInfo

from company.utils.content_convert import ContentConvert
from config.database_config import db_config
from data_collection_pipeline import DataCollectionPipeline
from llm.config import LLMConfig
from llm.llm_helper import LLMHelper
from marco.tools.document_processing.pure_python_converter import convert_md_to_docx_pure_python

from utils.rag_postgres import RAGPostgresHelper


class ReportGenerationConfig:
    """ç ”æŠ¥ç”Ÿæˆé…ç½®ç±»"""

    def __init__(self):
        load_dotenv()
        self.api_key = os.getenv("OPENAI_API_KEY")
        self.base_url = os.getenv("OPENAI_BASE_URL", "https://api.openai.com/v1")
        self.model = os.getenv("OPENAI_MODEL", "gpt-4")
        self.temperature = float(os.getenv("OPENAI_TEMPERATURE", "0.7"))
        self.max_tokens = int(os.getenv("OPENAI_MAX_TOKENS", "8192"))
        self.data_dir = Path("./download_financial_statement_files")
        self.logs_dir = Path("logs")
        self.max_discuss_rounds = int(os.getenv("MAX_DISCUSS_ROUNDS", "1"))

    def validate(self) -> bool:
        """éªŒè¯é…ç½®æ˜¯å¦æœ‰æ•ˆ"""
        if not self.api_key:
            raise ValueError("OPENAI_API_KEY ç¯å¢ƒå˜é‡æœªè®¾ç½®")
        return True


class ReportGenerationPipeline:
    """ç ”æŠ¥ç”Ÿæˆæµç¨‹ç±»"""

    def __init__(self,
                 target_company: str = "å•†æ±¤ç§‘æŠ€",
                 target_company_code: str = "00020",
                 target_company_market: str = "HK"):
        """
        åˆå§‹åŒ–ç ”æŠ¥ç”Ÿæˆæµç¨‹

        Args:
            target_company: ç›®æ ‡å…¬å¸åç§°
            target_company_code: å…¬å¸è‚¡ç¥¨ä»£ç 
            target_company_market: å¸‚åœºä»£ç 
        """
        self.config = ReportGenerationConfig()
        self.config.validate()

        self.target_company = target_company
        self.target_company_code = target_company_code
        self.target_company_market = target_company_market

        # å»¶è¿Ÿåˆå§‹åŒ–
        self._logger: Optional[logging.Logger] = None
        self._llm: Optional[LLMHelper] = None
        self._rag_helper: Optional[RAGPostgresHelper] = None
        self._agents: Dict[str, Any] = {}
        self.report_info: Optional[ReportInfo] = None

        # åˆå§‹åŒ–åŸºç¡€ç»„ä»¶
        self._setup_logging()

    @property
    def logger(self) -> logging.Logger:
        """è·å–æ—¥å¿—è®°å½•å™¨"""
        if self._logger is None:
            self._setup_logging()
        return self._logger

    @property
    def llm(self) -> LLMHelper:
        """è·å–LLMåŠ©æ‰‹"""
        if self._llm is None:
            self._setup_llm()
        return self._llm

    @property
    def rag_helper(self) -> RAGPostgresHelper:
        """è·å–RAGåŠ©æ‰‹"""
        if self._rag_helper is None:
            self._setup_rag_helper()
        return self._rag_helper

    def _setup_logging(self) -> None:
        """é…ç½®æ—¥å¿—è®°å½•"""
        self.config.logs_dir.mkdir(exist_ok=True)
        timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
        log_filename = self.config.logs_dir / f"report_generation_{timestamp}.log"

        self._logger = logging.getLogger(f'ReportGeneration_{id(self)}')
        self._logger.setLevel(logging.INFO)
        self._logger.handlers.clear()

        # æ–‡ä»¶å¤„ç†å™¨
        file_handler = logging.FileHandler(log_filename, encoding='utf-8')
        console_handler = logging.StreamHandler()

        formatter = logging.Formatter(
            '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
        )
        file_handler.setFormatter(formatter)
        console_handler.setFormatter(formatter)

        self._logger.addHandler(file_handler)
        self._logger.addHandler(console_handler)
        self._logger.info(f"ğŸ“ æ—¥å¿—è®°å½•å·²å¯åŠ¨ï¼Œæ—¥å¿—æ–‡ä»¶: {log_filename}")

    def _setup_llm(self) -> None:
        """åˆå§‹åŒ–LLMé…ç½®"""
        try:
            llm_config = LLMConfig(
                api_key=self.config.api_key,
                base_url=self.config.base_url,
                model=self.config.model,
                temperature=self.config.temperature,
                max_tokens=self.config.max_tokens,
            )
            self._llm = LLMHelper(llm_config)
            self.logger.info(f"ğŸ”§ LLMåˆå§‹åŒ–æˆåŠŸï¼Œä½¿ç”¨æ¨¡å‹: {self.config.model}")
        except Exception as e:
            self.logger.error(f"âŒ LLMåˆå§‹åŒ–å¤±è´¥: {e}")
            raise

    def _setup_rag_helper(self) -> None:
        """åˆå§‹åŒ–PostgreSQL RAGåŠ©æ‰‹"""
        try:
            self.logger.info("ğŸ”— åˆå§‹åŒ–PostgreSQL RAGåŠ©æ‰‹...")
            self._rag_helper = RAGPostgresHelper(
                db_config=db_config.get_postgres_config(),
                rag_config=db_config.get_rag_config()
            )
            self.logger.info("âœ… PostgreSQL RAGåŠ©æ‰‹åˆå§‹åŒ–æˆåŠŸ")
        except Exception as e:
            self.logger.error(f"âŒ PostgreSQL RAGåŠ©æ‰‹åˆå§‹åŒ–å¤±è´¥: {e}")
            raise

    def _setup_agents(self) -> None:
        """åˆå§‹åŒ–æ‰€æœ‰ä»£ç†"""
        if self._agents:
            return

        try:
            factory = OutlineAgentFactory()
            self._agents = {
                'section_edit': factory.create_agent(
                    OutlineAgentType.PART_GENERATOR_PART, self.logger, self.llm
                ),
                'section_opinion': factory.create_agent(
                    OutlineAgentType.PART_OPINION_GENERATOR_PART, self.logger, self.llm
                ),
                'abstract': factory.create_agent(
                    OutlineAgentType.PART_ABSTRACT_GENERATOR_PART, self.logger, self.llm
                ),
                'outline': factory.create_agent(
                    OutlineAgentType.OUTLINE_GENERATOR_PART, self.logger, self.llm
                ),
                'outline_opinion': factory.create_agent(
                    OutlineAgentType.OUTLINE_OPINION_GENERATOR_PART, self.logger, self.llm
                )
            }
            self.logger.info("âœ… æ‰€æœ‰ä»£ç†åˆå§‹åŒ–æˆåŠŸ")
        except Exception as e:
            self.logger.error(f"âŒ ä»£ç†åˆå§‹åŒ–å¤±è´¥: {e}")
            raise

    def _load_outline_template(self, template_name: str = "default") -> List[Dict[str, Any]]:
        """åŠ è½½å¤§çº²æ¨¡æ¿"""
        # è¿™é‡Œå¯ä»¥ä»å¤–éƒ¨æ–‡ä»¶åŠ è½½ï¼Œç°åœ¨å…ˆä½¿ç”¨é»˜è®¤æ¨¡æ¿
        default_template = [
            {
                "part_num": "1",
                "part_title": "1. å®è§‚ç¯å¢ƒåˆ†æ",
                "part_title_type": "ç« ",
                "part_desc": "ç³»ç»Ÿåˆ†æå…¨çƒAIäº§ä¸šæ”¿ç­–ç¯å¢ƒã€æŠ€æœ¯æ¼”è¿›è¶‹åŠ¿åŠå¸‚åœºéœ€æ±‚å˜åŒ–ï¼Œé‡ç‚¹è§£è¯»ä¸­å›½æ–°å‹åŸºç¡€è®¾æ–½å»ºè®¾å¯¹è®¡ç®—æœºè§†è§‰è¡Œä¸šçš„æˆ˜ç•¥æ”¯æŒï¼Œé˜æ˜å•†æ±¤ç§‘æŠ€å‘å±•çš„æ—¶ä»£èƒŒæ™¯ã€‚",
                "part_content_type": "ç°çŠ¶æè¿°",
                "part_key_output": "æ˜ç¡®å„å›½AIæˆ˜ç•¥å·®å¼‚åŠä¸­å›½æ”¿ç­–çº¢åˆ©çš„å…·ä½“è¡¨ç°ï¼Œé‡åŒ–æ–°åŸºå»ºæŠ•èµ„ä¸­å¯¹è®¡ç®—æœºè§†è§‰çš„æŠ•å…¥å æ¯”ï¼Œå»ºç«‹å®è§‚åˆ†ææ¡†æ¶ã€‚",
                "part_data_source": "å›½åŠ¡é™¢AIå‘å±•è§„åˆ’ã€IDCæŠ€æœ¯æ”¯å‡ºæŠ¥å‘Šã€æ–°åŸºå»ºæŠ•èµ„ç™½çš®ä¹¦",
                "part_importance": "æ ¸å¿ƒ",
                "part_length_ratio": "12%"
            },
            {
                "part_num": "1.1",
                "part_title": "1.1 å…¨çƒAIæ”¿ç­–å›¾è°±",
                "part_title_type": "èŠ‚",
                "part_desc": "å¯¹æ¯”åˆ†æä¸­ç¾æ¬§AIå‘å±•æˆ˜ç•¥å·®å¼‚ï¼Œç‰¹åˆ«å…³æ³¨èŠ¯ç‰‡å‡ºå£ç®¡åˆ¶å¯¹AIç®—åŠ›ä¾›ç»™çš„å½±å“æœºåˆ¶ã€‚",
                "part_content_type": "æ ¼å±€åˆ†æ",
                "part_key_output": "ç»˜åˆ¶ä¸»è¦å›½å®¶AIç›‘ç®¡æ²™ç›’å®æ–½è¿›åº¦å›¾ï¼Œé‡åŒ–GPUä¾›åº”é£é™©æŒ‡æ•°ã€‚",
                "part_data_source": "ç¾å›½å•†åŠ¡éƒ¨å‡ºå£ç®¡åˆ¶æ¸…å•ã€æ¬§ç›ŸAIæ³•æ¡ˆæ–‡æœ¬",
                "part_importance": "æ ¸å¿ƒ",
                "part_length_ratio": "5%"
            },
            {
                "part_num": "1.2",
                "part_title": "1.2 ä¸­å›½æ–°åŸºå»ºèµ‹èƒ½åˆ†æ",
                "part_title_type": "èŠ‚",
                "part_desc": "æ‹†è§£æ™ºæ…§åŸå¸‚ã€å·¥ä¸šäº’è”ç½‘ç­‰å›½å®¶å·¥ç¨‹å¯¹è®¡ç®—æœºè§†è§‰æŠ€æœ¯çš„éœ€æ±‚é‡Šæ”¾è·¯å¾„ã€‚",
                "part_content_type": "æ•°æ®è®ºè¯",
                "part_key_output": "æµ‹ç®—æ”¿åºœé¡¹ç›®åœ¨å•†æ±¤æ”¶å…¥ç»“æ„çš„å æ¯”è¶‹åŠ¿ï¼Œè¯„ä¼°æ”¿ç­–å»¶ç»­æ€§é£é™©ã€‚",
                "part_data_source": "è´¢æ”¿éƒ¨ä¸“é¡¹å€ºæŠ•å‘æ•°æ®ã€æ”¿åºœé‡‡è´­ç½‘ä¸­æ ‡è®°å½•",
                "part_importance": "æ¬¡è¦",
                "part_length_ratio": "7%"
            },
            {
                "part_num": "2",
                "part_title": "2. è¡Œä¸šç«äº‰æ ¼å±€",
                "part_title_type": "ç« ",
                "part_desc": "æ·±åº¦è§£æ„AIè§†è§‰äº§ä¸šä»·å€¼é“¾åˆ†å¸ƒï¼Œå»ºç«‹\"æŠ€æœ¯-åœºæ™¯-æ•°æ®\"ä¸‰ç»´è¯„ä¼°æ¨¡å‹ï¼Œåˆ†æå››å°é¾™å·®å¼‚åŒ–ç«äº‰ç­–ç•¥ã€‚",
                "part_content_type": "æ ¼å±€åˆ†æ",
                "part_key_output": "ç»˜åˆ¶äº§ä¸šä»·å€¼åˆ†é…çƒ­åŠ›å›¾ï¼Œè¯†åˆ«å•†æ±¤åœ¨ç®—æ³•å±‚-å¹³å°å±‚-åº”ç”¨å±‚çš„å¡ä½ä¼˜åŠ¿ã€‚",
                "part_data_source": "CB Insightsäº§ä¸šé“¾å›¾è°±ã€ä¼ä¸šä¸“åˆ©åœ°å›¾",
                "part_importance": "æ ¸å¿ƒ",
                "part_length_ratio": "18%"
            },
            {
                "part_num": "2.1",
                "part_title": "2.1 æŠ€æœ¯è·¯çº¿ç«äº‰",
                "part_title_type": "èŠ‚",
                "part_desc": "å¯¹æ¯”CNNã€Transformerç­‰æ¶æ„åœ¨è§†è§‰é¢†åŸŸçš„åº”ç”¨æ•ˆç‡ï¼Œè¯„ä¼°å•†æ±¤SenseCoreå¹³å°çš„è¿­ä»£èƒ½åŠ›ã€‚",
                "part_content_type": "ä»·å€¼è®ºè¯",
                "part_key_output": "å»ºç«‹ç®—æ³•æ€§èƒ½åŸºå‡†æµ‹è¯•å¯¹æ¯”è¡¨ï¼Œé‡åŒ–å•†æ±¤æ¨¡å‹åœ¨ImageNetç­‰æ•°æ®é›†çš„è¡¨ç°ä¼˜åŠ¿ã€‚",
                "part_data_source": "arXivè®ºæ–‡åº“ã€Kaggleç«èµ›æ•°æ®",
                "part_importance": "æ ¸å¿ƒ",
                "part_length_ratio": "8%"
            },
            {
                "part_num": "2.2",
                "part_title": "2.2 å•†ä¸šåŒ–è·¯å¾„å¯¹æ¯”",
                "part_title_type": "èŠ‚",
                "part_desc": "åˆ†æå„å‚å•†åœ¨æ™ºæ…§åŸå¸‚ã€è‡ªåŠ¨é©¾é©¶ç­‰åœºæ™¯çš„è½åœ°æ•ˆç‡ï¼Œæµ‹ç®—é¡¹ç›®ROIå·®å¼‚ã€‚",
                "part_content_type": "æ•°æ®è®ºè¯",
                "part_key_output": "æ„å»ºå®¢æˆ·è·å–æˆæœ¬(CAC)ä¸ç”Ÿå‘½å‘¨æœŸä»·å€¼(LTV)å¯¹æ¯”çŸ©é˜µã€‚",
                "part_data_source": "æ‹›æŠ•æ ‡æ•°æ®åº“ã€è¡Œä¸šä¸“å®¶è®¿è°ˆ",
                "part_importance": "æ¬¡è¦",
                "part_length_ratio": "10%"
            },
            {
                "part_num": "3",
                "part_title": "3. å…¬å¸æ ¸å¿ƒç«äº‰åŠ›",
                "part_title_type": "ç« ",
                "part_desc": "ä»äººæ‰å¯†åº¦ã€ç®—åŠ›å‚¨å¤‡ã€æ•°æ®èµ„äº§ä¸‰ä¸ªç»´åº¦æ„å»ºè¯„ä¼°ä½“ç³»ï¼Œè§£æå•†æ±¤ç§‘æŠ€æŠ¤åŸæ²³æ„æˆã€‚",
                "part_content_type": "ä»·å€¼è®ºè¯",
                "part_key_output": "é‡åŒ–é¡¶çº§AIç§‘å­¦å®¶å æ¯”ã€GPUé›†ç¾¤ç®—åŠ›è§„æ¨¡ã€æ ‡æ³¨æ•°æ®é‡ç­‰æ ¸å¿ƒæŒ‡æ ‡è¡Œä¸šæ’åã€‚",
                "part_data_source": "LinkedInäººæ‰å›¾è°±ã€è¶…ç®—ä¸­å¿ƒè¿è¥æ•°æ®",
                "part_importance": "æ ¸å¿ƒ",
                "part_length_ratio": "20%"
            },
            {
                "part_num": "3.1",
                "part_title": "3.1 äººæ‰æˆ˜ç•¥åˆ†æ",
                "part_title_type": "èŠ‚",
                "part_desc": "ç ”ç©¶å•†æ±¤ä¸ä¸­ç§‘é™¢ã€é¦™æ¸¯é«˜æ ¡çš„è”åˆå®éªŒå®¤è¿ä½œæœºåˆ¶ï¼Œè¯„ä¼°å…¶äººæ‰é€ è¡€èƒ½åŠ›ã€‚",
                "part_content_type": "ç°çŠ¶æè¿°",
                "part_key_output": "è®¡ç®—é™¢å£«/IEEE Fellowçº§ä¸“å®¶å æ¯”ï¼Œåˆ†æå…³é”®æŠ€æœ¯äººæ‰æµå¤±é£é™©ã€‚",
                "part_data_source": "å­¦æœ¯åˆä½œè®ºæ–‡ç»Ÿè®¡ã€ç«ä¸šé™åˆ¶è¯‰è®¼è®°å½•",
                "part_importance": "æ¬¡è¦",
                "part_length_ratio": "7%"
            },
            {
                "part_num": "3.2",
                "part_title": "3.2 ç®—åŠ›åŸºç¡€è®¾æ–½",
                "part_title_type": "èŠ‚",
                "part_desc": "å®¡è®¡å•†æ±¤è‡ªå»ºAIè®¡ç®—ä¸­å¿ƒè¿è¥æ•ˆç‡ï¼Œåˆ†æAIDCçš„åˆ©ç”¨ç‡ä¸èƒ½è€—æ¯”ã€‚",
                "part_content_type": "æ•°æ®è®ºè¯",
                "part_key_output": "å»ºç«‹ç®—åŠ›æˆæœ¬å¯¹æ ‡æ¨¡å‹ï¼Œå¯¹æ¯”AWSç­‰å…¬æœ‰äº‘æœåŠ¡çš„ç»æµæ€§å·®å¼‚ã€‚",
                "part_data_source": "æ•°æ®ä¸­å¿ƒPUEæŠ¥å‘Šã€GPUé‡‡è´­åˆåŒ",
                "part_importance": "æ ¸å¿ƒ",
                "part_length_ratio": "13%"
            },
            {
                "part_num": "4",
                "part_title": "4. è´¢åŠ¡å¥åº·åº¦è¯„ä¼°",
                "part_title_type": "ç« ",
                "part_desc": "é‡‡ç”¨\"æ”¶å…¥è´¨é‡-ç ”å‘æ•ˆèƒ½-ç°é‡‘æµéŸ§æ€§\"ä¸‰ç»´åˆ†ææ¡†æ¶ï¼Œç©¿é€å¼è§£è¯»è´¢åŠ¡æŠ¥è¡¨å…³é”®æŒ‡æ ‡ã€‚",
                "part_content_type": "æ•°æ®è®ºè¯",
                "part_key_output": "æ„å»ºç ”å‘èµ„æœ¬åŒ–ç‡è°ƒæ•´åçš„çœŸå®ç›ˆåˆ©æ¨¡å‹ï¼Œè¯†åˆ«åº”æ”¶è´¦æ¬¾å‘¨è½¬é£é™©ç‚¹ã€‚",
                "part_data_source": "å¹´æŠ¥é™„æ³¨ã€åŒè¡Œèµ„æœ¬åŒ–æ”¿ç­–å¯¹æ¯”",
                "part_importance": "æ ¸å¿ƒ",
                "part_length_ratio": "15%"
            },
            {
                "part_num": "4.1",
                "part_title": "4.1 æ”¶å…¥ç»“æ„é€è§†",
                "part_title_type": "èŠ‚",
                "part_desc": "åˆ†è§£è½¯ä»¶æˆæƒã€è§£å†³æ–¹æ¡ˆã€å¹³å°æœåŠ¡ç­‰ä¸šåŠ¡çº¿çš„æ¯›åˆ©ç‡å·®å¼‚ï¼Œè¿½è¸ªæ”¿åºœé¡¹ç›®å›æ¬¾å‘¨æœŸã€‚",
                "part_content_type": "ç°çŠ¶æè¿°",
                "part_key_output": "ç»˜åˆ¶æ”¶å…¥æ¥æºçƒ­åŠ›å›¾ï¼Œæ ‡æ³¨è´¦æœŸè¶…è¿‡180å¤©çš„é‡å¤§åˆåŒæ˜ç»†ã€‚",
                "part_data_source": "å®¢æˆ·é›†ä¸­åº¦æŠ«éœ²ã€è´¦é¾„åˆ†æè¡¨",
                "part_importance": "æ¬¡è¦",
                "part_length_ratio": "6%"
            },
            {
                "part_num": "4.2",
                "part_title": "4.2 ç ”å‘æ•ˆèƒ½å®¡è®¡",
                "part_title_type": "èŠ‚",
                "part_desc": "åˆ†æç ”å‘æ”¯å‡ºèµ„æœ¬åŒ–æ”¿ç­–åˆç†æ€§ï¼Œè®¡ç®—ä¸“åˆ©è½¬åŒ–ç‡ä¸äººå‡ç ”å‘äº§å‡ºã€‚",
                "part_content_type": "ä»·å€¼è®ºè¯",
                "part_key_output": "å»ºç«‹ç ”å‘æŠ•å…¥-ä¸“åˆ©è´¨é‡-å•†ä¸šäº§å‡ºå…³è”æ¨¡å‹ï¼Œå¯¹æ¯”å›½é™…å·¨å¤´æ•ˆç‡å·®è·ã€‚",
                "part_data_source": "ä¸“åˆ©å¼•ç”¨æŒ‡æ•°ã€ç ”å‘äººå‘˜KPIæ•°æ®",
                "part_importance": "æ ¸å¿ƒ",
                "part_length_ratio": "9%"
            },
            {
                "part_num": "5",
                "part_title": "5. ä¼°å€¼å»ºæ¨¡",
                "part_title_type": "ç« ",
                "part_desc": "è®¾è®¡ä¸‰é˜¶æ®µDCFæ¨¡å‹ï¼Œç»“åˆPSMæ³•å¯¹å¹³å°å‹ä¸šåŠ¡ä¼°å€¼ï¼Œè®¾ç½®æŠ€æœ¯çªç ´/åœ°ç¼˜æ”¿æ²»ç­‰æƒ…æ™¯æµ‹è¯•ã€‚",
                "part_content_type": "ä»·å€¼è®ºè¯",
                "part_key_output": "ç”Ÿæˆä¹è§‚/ä¸­æ€§/æ‚²è§‚ä¸‰ç§æƒ…æ™¯ä¸‹çš„ä¼°å€¼åŒºé—´ï¼Œæ ‡æ³¨å…³é”®ä»·å€¼é©±åŠ¨å› å­æ•æ„Ÿæ€§ã€‚",
                "part_data_source": "WACCè®¡ç®—è¡¨ã€å¯æ¯”å…¬å¸äº¤æ˜“ä¹˜æ•°",
                "part_importance": "æ ¸å¿ƒ",
                "part_length_ratio": "15%"
            },
            {
                "part_num": "5.1",
                "part_title": "5.1 ç°é‡‘æµæŠ˜ç°æ¨¡å‹",
                "part_title_type": "èŠ‚",
                "part_desc": "åŸºäºå•†æ±¤å››å¤§ä¸šåŠ¡æ¿å—æ‹†åˆ†æ”¶å…¥é¢„æµ‹ï¼ŒåŠ¨æ€è°ƒæ•´ç ”å‘è´¹ç”¨èµ„æœ¬åŒ–å½±å“ã€‚",
                "part_content_type": "æ•°æ®è®ºè¯",
                "part_key_output": "è¾“å‡ºåˆ†ä¸šåŠ¡çº¿è‡ªç”±ç°é‡‘æµé¢„æµ‹è¡¨ï¼Œæ ‡æ³¨æ ¸å¿ƒå‡è®¾å˜åŠ¨é˜ˆå€¼ã€‚",
                "part_data_source": "ç»†åˆ†ä¸šåŠ¡å¢é•¿ç‡æŒ‡å¼•ã€èµ„æœ¬å¼€æ”¯è®¡åˆ’",
                "part_importance": "æ¬¡è¦",
                "part_length_ratio": "8%"
            },
            {
                "part_num": "5.2",
                "part_title": "5.2 åœºæ™¯å‹åŠ›æµ‹è¯•",
                "part_title_type": "èŠ‚",
                "part_desc": "æ¨¡æ‹Ÿç¾å›½æ‰©å¤§èŠ¯ç‰‡ç¦è¿ã€æ ¸å¿ƒå›¢é˜Ÿç¦»èŒç­‰æç«¯æƒ…å†µå¯¹å…¬å¸ä»·å€¼çš„å†²å‡»å¹…åº¦ã€‚",
                "part_content_type": "ä»·å€¼è®ºè¯",
                "part_key_output": "é‡åŒ–é»‘å¤©é¹…äº‹ä»¶å¯¹ä¼°å€¼çš„å½±å“ç³»æ•°ï¼Œåˆ¶å®šé£é™©å¯¹å†²ç­–ç•¥å»ºè®®ã€‚",
                "part_data_source": "ä¾›åº”é“¾æ›¿ä»£æ–¹æ¡ˆè¯„ä¼°ã€å…³é”®äººä¿é™©æ•°æ®",
                "part_importance": "æ ¸å¿ƒ",
                "part_length_ratio": "7%"
            },
            {
                "part_num": "6",
                "part_title": "6. æŠ•èµ„å†³ç­–å»ºè®®",
                "part_title_type": "ç« ",
                "part_desc": "ç»“åˆæŠ€æœ¯æˆç†Ÿåº¦æ›²çº¿ä¸ä¼°å€¼æ³¢æ®µï¼Œåˆ¶å®šå·®å¼‚åŒ–å»ºä»“ç­–ç•¥ï¼Œæ˜ç¡®å…³é”®è§‚æµ‹æŒ‡æ ‡ã€‚",
                "part_content_type": "ä»·å€¼è®ºè¯",
                "part_key_output": "ç”ŸæˆæŠ•èµ„å†³ç­–çŸ©é˜µï¼Œæ ‡æ³¨æŠ€æœ¯çªç ´ã€æ”¿ç­–å‚¬åŒ–ç­‰äº‹ä»¶é©±åŠ¨äº¤æ˜“æ—¶ç‚¹ã€‚",
                "part_data_source": "æœºæ„æŒä»“å˜åŠ¨æ•°æ®ã€æœŸæƒéšå«æ³¢åŠ¨ç‡",
                "part_importance": "æ ¸å¿ƒ",
                "part_length_ratio": "10%"
            },
            {
                "part_num": "6.1",
                "part_title": "6.1 é…ç½®ç­–ç•¥",
                "part_title_type": "èŠ‚",
                "part_desc": "æ ¹æ®èµ„é‡‘å±æ€§è®¾è®¡VC/PE/äºŒçº§å¸‚åœºä¸åŒå‚ä¸æ–¹å¼çš„æœ€ä¼˜è¿›å…¥è·¯å¾„ã€‚",
                "part_content_type": "ç°çŠ¶æè¿°",
                "part_key_output": "ç»˜åˆ¶ä¸åŒé£é™©åå¥½ä¸‹çš„ä»“ä½é…ç½®å›¾è°±ï¼Œæ ‡æ³¨æ­¢æŸè§¦å‘æ¡ä»¶ã€‚",
                "part_data_source": "å†å²æ³¢åŠ¨ç‡åˆ†æã€è´å¡”ç³»æ•°æµ‹ç®—",
                "part_importance": "æ¬¡è¦",
                "part_length_ratio": "5%"
            },
            {
                "part_num": "6.2",
                "part_title": "6.2 ç›‘æµ‹æ¡†æ¶",
                "part_title_type": "èŠ‚",
                "part_desc": "å»ºç«‹åŒ…å«æŠ€æœ¯æŒ‡æ ‡ã€è´¢åŠ¡æŒ‡æ ‡ã€æ”¿ç­–æŒ‡æ ‡çš„ä¸‰ç»´é¢„è­¦ä½“ç³»ã€‚",
                "part_content_type": "ä»·å€¼è®ºè¯",
                "part_key_output": "åˆ—å‡ºå­£åº¦å¿…é¡»è·Ÿè¸ªçš„10é¡¹å…³é”®ç»©æ•ˆæŒ‡æ ‡(KPI)åŠå…¶é˜ˆå€¼èŒƒå›´ã€‚",
                "part_data_source": "ç®¡ç†å±‚æŒ‡å¼•ã€è¡Œä¸šå…ˆè¡ŒæŒ‡æ ‡",
                "part_importance": "æ ¸å¿ƒ",
                "part_length_ratio": "5%"
            },
            {
                "part_num": "7",
                "part_title": "7. é£é™©å…¨æ™¯å›¾",
                "part_title_type": "ç« ",
                "part_desc": "é‡‡ç”¨FMEA(å¤±æ•ˆæ¨¡å¼ä¸å½±å“åˆ†æ)æ–¹æ³•ï¼Œç³»ç»Ÿè¯†åˆ«æŠ€æœ¯è·¯çº¿ã€å•†ä¸šå˜ç°ã€å…¬å¸æ²»ç†ç­‰ç»´åº¦çš„æ½œåœ¨é£é™©ã€‚",
                "part_content_type": "ç°çŠ¶æè¿°",
                "part_key_output": "åˆ¶ä½œé£é™©çƒ­åŠ›å›¾ï¼Œæ ‡æ³¨å‘ç”Ÿæ¦‚ç‡ä¸å½±å“ç¨‹åº¦çš„ä¹˜ç§¯æ’åºã€‚",
                "part_data_source": "å†å²é£é™©äº‹ä»¶åº“ã€ä¸“å®¶æ¦‚ç‡è¯„ä¼°",
                "part_importance": "æ¬¡è¦",
                "part_length_ratio": "10%"
            }
        ]
        return default_template

    def _load_text_template(self, template_name: str = "default") -> List[str]:

        default_template = [
            "## 1. å®è§‚ç¯å¢ƒåˆ†æ\n\näººå·¥æ™ºèƒ½è¡Œä¸šä½œä¸ºå…¨çƒç§‘æŠ€ç«äº‰çš„æˆ˜ç•¥åˆ¶é«˜ç‚¹ï¼Œå…¶å‘å±•å—åˆ°æ”¿ç­–æ”¯æŒã€æŠ€æœ¯è¿›æ­¥ã€ç»æµç¯å¢ƒå’Œç¤¾ä¼šéœ€æ±‚ç­‰å¤šé‡å®è§‚å› ç´ çš„æ·±åˆ»å½±å“ã€‚æœ¬éƒ¨åˆ†å°†ä»å››ä¸ªç»´åº¦ç³»ç»Ÿåˆ†æå½“å‰äººå·¥æ™ºèƒ½äº§ä¸šå‘å±•çš„å®è§‚é©±åŠ¨å› ç´ ã€‚\n\n### 1.1 æ”¿ç­–æ”¯æŒæŒç»­åŠ ç \nå…¨çƒä¸»è¦ç»æµä½“å·²å°†äººå·¥æ™ºèƒ½ä¸Šå‡ä¸ºå›½å®¶æˆ˜ç•¥ã€‚ä¸­å›½\"åå››äº”\"è§„åˆ’æ˜ç¡®å°†äººå·¥æ™ºèƒ½åˆ—ä¸ºå‰æ²¿ç§‘æŠ€é¢†åŸŸçš„ä¸ƒå¤§é‡ç‚¹äº§ä¸šä¹‹ä¸€ï¼Œ2023å¹´ä¸­å¤®è´¢æ”¿ç§‘æŠ€æ”¯å‡ºåŒæ¯”å¢é•¿7.1%[1]ï¼Œå…¶ä¸­AIç›¸å…³é¢†åŸŸè·å¾—é‡ç‚¹å€¾æ–œã€‚ç¾å›½é€šè¿‡ã€ŠèŠ¯ç‰‡ä¸ç§‘å­¦æ³•æ¡ˆã€‹æ‹¨æ¬¾520äº¿ç¾å…ƒæ”¯æŒåŒ…æ‹¬AIèŠ¯ç‰‡åœ¨å†…çš„å…³é”®æŠ€æœ¯ç ”å‘[2]ã€‚æ¬§ç›Ÿã€Šäººå·¥æ™ºèƒ½æ³•æ¡ˆã€‹åˆ™æ„å»ºäº†å…¨çƒé¦–ä¸ªå…¨é¢çš„AIç›‘ç®¡æ¡†æ¶ã€‚æ”¿ç­–çº¢åˆ©ä¸ºè¡Œä¸šæä¾›äº†æ˜ç¡®çš„åˆ¶åº¦ä¿éšœå’Œå‘å±•æ–¹å‘ã€‚\n\n### 1.2 æŠ€æœ¯çªç ´åŠ é€Ÿå•†ä¸šåŒ–\n2023å¹´å…¨çƒAIé¢†åŸŸä¸“åˆ©ç”³è¯·é‡è¾¾13.8ä¸‡ä»¶ï¼ŒåŒæ¯”å¢é•¿26%[3]ã€‚Transformeræ¶æ„çš„æŒç»­ä¼˜åŒ–æ¨åŠ¨å¤§æ¨¡å‹å‚æ•°é‡çªç ´ä¸‡äº¿çº§ï¼ŒGPT-4ç­‰æ¨¡å‹çš„å•†ä¸šåŒ–è½åœ°ä½¿å¾—AIæŠ€æœ¯æ¸—é€ç‡å¿«é€Ÿæå‡ã€‚æ®IDCæ•°æ®ï¼Œå…¨çƒAIç®—åŠ›æŠ•èµ„2023å¹´è¾¾1540äº¿ç¾å…ƒï¼Œé¢„è®¡2026å¹´å°†çªç ´3000äº¿ç¾å…ƒ[4]ã€‚èŠ¯ç‰‡åˆ¶ç¨‹è¿›æ­¥ä¸ç®—æ³•æ•ˆç‡æå‡å…±åŒæ¨åŠ¨æŠ€æœ¯æˆæœ¬æ›²çº¿ä¸‹ç§»ï¼Œè¡Œä¸šè¿›å…¥è§„æ¨¡å•†ç”¨ä¸´ç•Œç‚¹ã€‚\n\n### 1.3 ç»æµç¯å¢ƒåˆ›é€ æ–°éœ€æ±‚\nåç–«æƒ…æ—¶ä»£ä¼ä¸šæ•°å­—åŒ–è½¬å‹åŠ é€Ÿï¼Œå…¨çƒä¼ä¸šè½¯ä»¶æ”¯å‡º2023å¹´å¢é•¿12.4%è‡³8560äº¿ç¾å…ƒ[5]ã€‚åˆ¶é€ ä¸šæ™ºèƒ½åŒ–æ”¹é€ å‚¬ç”Ÿå·¥ä¸šè§†è§‰æ£€æµ‹ã€é¢„æµ‹æ€§ç»´æŠ¤ç­‰AIåº”ç”¨åœºæ™¯ï¼Œé‡‘èä¸šæ™ºèƒ½é£æ§æ¸—é€ç‡å·²è¾¾43%[6]ã€‚ç»æµç»“æ„è°ƒæ•´è¿‡ç¨‹ä¸­ï¼ŒAIæŠ€æœ¯æˆä¸ºä¼ä¸šé™æœ¬å¢æ•ˆçš„æ ¸å¿ƒå·¥å…·ï¼Œé¢„è®¡åˆ°2025å¹´å°†ä¸ºå…¨çƒç»æµé¢å¤–è´¡çŒ®15.7ä¸‡äº¿ç¾å…ƒäº§å‡º[7]ã€‚\n\n### 1.4 ç¤¾ä¼šè®¤çŸ¥åº¦æ˜¾è‘—æå‡\næ¶ˆè´¹è€…å¯¹AIäº§å“çš„æ¥å—åº¦æŒç»­æé«˜ï¼Œ2023å¹´å…¨çƒæ™ºèƒ½è¯­éŸ³åŠ©æ‰‹ç”¨æˆ·çªç ´20äº¿ï¼Œä¸­å›½åŸå¸‚å®¶åº­æ™ºèƒ½è®¾å¤‡æ¸—é€ç‡è¾¾62%[8]ã€‚åŒ»ç–—å½±åƒè¯†åˆ«ã€æ™ºèƒ½æ•™è‚²ç­‰æ°‘ç”Ÿé¢†åŸŸåº”ç”¨æ˜¾è‘—æ”¹å–„å…¬å…±æœåŠ¡æ•ˆç‡ã€‚åŒæ—¶ï¼ŒAIä¼¦ç†å’Œéšç§ä¿æŠ¤æ„è¯†å¢å¼ºï¼Œæ¨åŠ¨è¡Œä¸šå‘è´Ÿè´£ä»»å‘å±•æ–¹å‘æ¼”è¿›ã€‚\n\nç»¼åˆæ¥çœ‹ï¼Œå½“å‰äººå·¥æ™ºèƒ½è¡Œä¸šæ­£å¤„äºæ”¿ç­–ã€æŠ€æœ¯ã€ç»æµå’Œç¤¾ä¼šå››é‡åˆ©å¥½å åŠ çš„å‘å±•çª—å£æœŸã€‚å•†æ±¤ç§‘æŠ€ä½œä¸ºè®¡ç®—æœºè§†è§‰é¢†åŸŸçš„é¢†å†›ä¼ä¸šï¼Œéœ€è¦æŠŠæ¡ä½åŸºç¡€ç ”ç©¶çªç ´ä¸äº§ä¸šè½åœ°åŠ é€Ÿçš„æˆ˜ç•¥æœºé‡ï¼Œåœ¨æŒç»­å˜åŒ–çš„å®è§‚ç¯å¢ƒä¸­ä¿æŒæŠ€æœ¯é¢†å…ˆä¼˜åŠ¿ã€‚",
            "## 2. è¡Œä¸šåˆ†æ",
            "### 2.1 è®¡ç®—æœºè§†è§‰ç»†åˆ†å¸‚åœº\n\nè®¡ç®—æœºè§†è§‰ä½œä¸ºäººå·¥æ™ºèƒ½çš„æ ¸å¿ƒæŠ€æœ¯é¢†åŸŸï¼Œå·²æˆä¸ºå•†æ±¤ç§‘æŠ€ï¼ˆè‚¡ç¥¨ä»£ç ï¼š0020.HKï¼‰æœ€å…·ç«äº‰åŠ›çš„ä¸»è¥ä¸šåŠ¡æ¿å—ï¼ˆæ•°æ®æ¥æºï¼šåŒèŠ±é¡º-ä¸»è¥ä»‹ç»[2]ï¼‰ã€‚æœ¬éƒ¨åˆ†å°†ä»æŠ€æœ¯åº”ç”¨åœºæ™¯ã€å¸‚åœºè§„æ¨¡åŠå¢é•¿åŠ¨åŠ›ä¸‰ä¸ªç»´åº¦å±•å¼€æ·±åº¦åˆ†æã€‚\n\n#### æŠ€æœ¯åº”ç”¨åœºæ™¯åˆ†æ\nå•†æ±¤ç§‘æŠ€çš„è®¡ç®—æœºè§†è§‰æŠ€æœ¯å·²å®ç°å››å¤§å•†ä¸šåŒ–è½åœ°åœºæ™¯ï¼š\n1. **æ™ºæ…§åŸå¸‚**ï¼šè¦†ç›–å…¨å›½30+çœçº§è¡Œæ”¿åŒºï¼Œéƒ¨ç½²è¶…10ä¸‡è·¯æ™ºèƒ½æ‘„åƒå¤´ï¼Œå®ç°äº¤é€šæµé‡åˆ†æã€å¼‚å¸¸è¡Œä¸ºè¯†åˆ«ç­‰åŠŸèƒ½ï¼ˆæ•°æ®æ¥æºï¼šå…¬å¸2022å¹´æŠ¥ï¼‰ï¼›\n2. **æ™ºèƒ½æ‰‹æœº**ï¼šä¸ºOPPOã€vivoç­‰å¤´éƒ¨å‚å•†æä¾›3Dä¼ æ„Ÿè§£å†³æ–¹æ¡ˆï¼Œ2022å¹´ç›¸å…³æ”¶å…¥è¾¾12.4äº¿æ¸¯å…ƒï¼ˆæ•°æ®æ¥æºï¼šä¸œæ–¹è´¢å¯Œ-æ¸¯è‚¡-è´¢åŠ¡æŠ¥è¡¨[1]ï¼‰ï¼›\n3. **åŒ»ç–—å½±åƒ**ï¼šåœ¨CT/MRIå½±åƒåˆ†æé¢†åŸŸå¸‚å ç‡è¾¾17%ï¼Œåˆä½œåŒ»é™¢è¶…500å®¶ï¼›\n4. **å·¥ä¸šè´¨æ£€**ï¼šåœ¨3Cåˆ¶é€ é¢†åŸŸå®ç°ç¼ºé™·è¯†åˆ«å‡†ç¡®ç‡99.2%ï¼Œå¹´å¤„ç†å›¾åƒè¶…50äº¿å¼ ã€‚\n\n#### å¸‚åœºè§„æ¨¡é‡åŒ–åˆ†æ\næ ¹æ®è‡ªåŠ¨åŒ–é‡‡é›†çš„è¡Œä¸šæ•°æ®æ˜¾ç¤ºï¼š\n- 2022å¹´å…¨çƒè®¡ç®—æœºè§†è§‰å¸‚åœºè§„æ¨¡è¾¾562äº¿ç¾å…ƒï¼Œä¸­å›½å æ¯”38%ï¼›\n- å•†æ±¤ç§‘æŠ€åœ¨ä¸­å›½è®¡ç®—æœºè§†è§‰è½¯ä»¶å¸‚åœºçš„ä»½é¢ä¸º22.1%ï¼Œä½åˆ—è¡Œä¸šç¬¬ä¸€ï¼›\n- ç»†åˆ†é¢†åŸŸå¢é€Ÿå·®å¼‚æ˜¾è‘—ï¼šæ™ºæ…§åŸå¸‚ï¼ˆå¹´å¤åˆå¢é•¿ç‡18.7%ï¼‰<å·¥ä¸šè´¨æ£€ï¼ˆ31.2%ï¼‰<åŒ»ç–—å½±åƒï¼ˆ41.5%ï¼‰ã€‚\n\n#### å¢é•¿åŠ¨åŠ›è¯„ä¼°\næœªæ¥3-5å¹´çš„æ ¸å¿ƒé©±åŠ¨åŠ›åŒ…æ‹¬ï¼š\n1. **æ”¿ç­–æ”¯æŒ**ï¼šå›½å®¶\"åå››äº”\"è§„åˆ’æ˜ç¡®å°†è®¡ç®—æœºè§†è§‰åˆ—å…¥æ–°ä¸€ä»£AIé‡ç‚¹å‘å±•ç›®å½•ï¼›\n2. **æŠ€æœ¯è¿­ä»£**ï¼šTransformeræ¶æ„çš„åº”ç”¨ä½¿å›¾åƒè¯†åˆ«å‡†ç¡®ç‡æå‡è‡³98.3%ï¼›\n3. **æˆæœ¬ä¸‹é™**ï¼šGPUç®—åŠ›æˆæœ¬å¹´å‡ä¸‹é™27%ï¼Œæ¨åŠ¨å•†ä¸šåŒ–è½åœ°é€Ÿåº¦ï¼›\n4. **æ–°å…´åœºæ™¯**ï¼šå…ƒå®‡å®™ç›¸å…³AR/VRåº”ç”¨é¢„è®¡å¸¦æ¥200äº¿å…ƒå¢é‡å¸‚åœºã€‚\n\n#### å•†ä¸šåŒ–æ½œåŠ›é¢„æµ‹\nåŸºäºè´¢åŠ¡æ¨¡å‹æµ‹ç®—ï¼ˆæ•°æ®æ¥æºï¼šä¸œæ–¹è´¢å¯Œ-æ¸¯è‚¡-è´¢åŠ¡æŠ¥è¡¨[1]ï¼‰ï¼š\n| åº”ç”¨åœºæ™¯   | 2023Eæ”¶å…¥(äº¿æ¸¯å…ƒ) | 2025Eæ”¶å…¥(äº¿æ¸¯å…ƒ) | CAGR   |\n|------------|-------------------|-------------------|--------|\n| æ™ºæ…§åŸå¸‚   | 28.5              | 39.2              | 17.2%  |\n| æ™ºèƒ½æ‰‹æœº   | 15.7              | 18.9              | 9.6%   |\n| åŒ»ç–—å½±åƒ   | 6.3               | 12.8              | 42.6%  |\n| å·¥ä¸šè´¨æ£€   | 4.1               | 9.5               | 52.3%  |\n\nï¼ˆæ³¨ï¼šè¡¨ä¸­æ•°æ®ç»è’™ç‰¹å¡æ´›æ¨¡æ‹ŸéªŒè¯ï¼Œç½®ä¿¡åŒºé—´95%ï¼‰\n\né£é™©æç¤ºï¼šéœ€å…³æ³¨ä¸­ç¾æŠ€æœ¯è„±é’©å¯¹GPUä¾›åº”é“¾çš„å½±å“ï¼Œä»¥åŠåŒ»ç–—é¢†åŸŸæ•°æ®åˆè§„è¦æ±‚çš„æŒç»­å‡çº§ã€‚",
            "## 3. å…¬å¸åŸºæœ¬é¢\n\n### 3.1 å‘å±•å†ç¨‹ä¸æˆ˜ç•¥å®šä½\nå•†æ±¤ç§‘æŠ€ï¼ˆè‚¡ç¥¨ä»£ç ï¼š0020.HKï¼‰æˆç«‹äº2014å¹´ï¼Œæ˜¯ä¸­å›½é¢†å…ˆçš„äººå·¥æ™ºèƒ½è½¯ä»¶å…¬å¸ï¼Œä¸“æ³¨äºè®¡ç®—æœºè§†è§‰å’Œæ·±åº¦å­¦ä¹ æŠ€æœ¯çš„ç ”å‘ä¸åº”ç”¨ã€‚å…¬å¸ä»¥\"åšæŒåŸåˆ›ï¼Œè®©AIå¼•é¢†äººç±»è¿›æ­¥\"ä¸ºä½¿å‘½ï¼Œé€šè¿‡SenseCoreå•†æ±¤AIå¤§è£…ç½®ä¸ºæ ¸å¿ƒåŸºç¡€è®¾æ–½ï¼Œæ„å»ºäº†è¦†ç›–æ™ºæ…§å•†ä¸šã€æ™ºæ…§åŸå¸‚ã€æ™ºæ…§ç”Ÿæ´»ã€æ™ºèƒ½æ±½è½¦å››å¤§ä¸šåŠ¡æ¿å—çš„å®Œæ•´AIç”Ÿæ€ä½“ç³»[2]ã€‚\n\n### 3.2 è‚¡æƒç»“æ„ä¸å…¬å¸æ²»ç†\næˆªè‡³æœ€æ–°æŠ«éœ²ï¼Œå…¬å¸ä¸»è¦è‚¡ä¸œåŒ…æ‹¬ï¼š\n- åˆ›å§‹äººå›¢é˜ŸæŒè‚¡å æ¯”23.5%\n- é˜¿é‡Œå·´å·´é›†å›¢é€šè¿‡æ·˜å®ä¸­å›½æŒè‚¡7.3%\n- è½¯é“¶æ„¿æ™¯åŸºé‡‘æŒè‚¡14.2%\n- å…¶ä»–æœºæ„æŠ•èµ„è€…åˆè®¡æŒè‚¡42.6%\n- å…¬ä¼—æµé€šè‚¡å æ¯”12.4%[3]\n\nå…¬å¸é‡‡ç”¨åŒè‚¡ä¸åŒæƒæ¶æ„ï¼Œåˆ›å§‹äººå›¢é˜Ÿé€šè¿‡ç‰¹åˆ«æŠ•ç¥¨æƒè‚¡ä»½ä¿æŒå¯¹å…¬å¸çš„æ§åˆ¶æƒã€‚è‘£äº‹ä¼šç”±9åæˆå‘˜ç»„æˆï¼Œå…¶ä¸­ç‹¬ç«‹éæ‰§è¡Œè‘£äº‹4åï¼Œç¬¦åˆæ¸¯äº¤æ‰€å…¬å¸æ²»ç†è¦æ±‚[3]ã€‚\n\n### 3.3 ä¸šåŠ¡å¸ƒå±€ä¸æ”¶å…¥ç»“æ„\nå…¬å¸ä¸»è¥ä¸šåŠ¡åˆ†ä¸ºå››å¤§æ¿å—ï¼ˆæ•°æ®æ¥æºï¼šåŒèŠ±é¡º-ä¸»è¥ä»‹ç»[2]ï¼‰ï¼š\n1. æ™ºæ…§å•†ä¸šï¼šä¸ºé‡‘èã€é›¶å”®ã€åˆ¶é€ ç­‰è¡Œä¸šæä¾›AIè§£å†³æ–¹æ¡ˆï¼Œ2022å¹´æ”¶å…¥å æ¯”32%\n2. æ™ºæ…§åŸå¸‚ï¼šé¢å‘æ”¿åºœå®¢æˆ·çš„åŸå¸‚ç®¡ç†AIå¹³å°ï¼Œæ”¶å…¥å æ¯”41% \n3. æ™ºæ…§ç”Ÿæ´»ï¼šæ¶µç›–æ‰‹æœºã€AR/VRç­‰æ¶ˆè´¹çº§AIåº”ç”¨ï¼Œæ”¶å…¥å æ¯”18%\n4. æ™ºèƒ½æ±½è½¦ï¼šè‡ªåŠ¨é©¾é©¶å’Œè½¦èˆ±äº¤äº’è§£å†³æ–¹æ¡ˆï¼Œæ”¶å…¥å æ¯”9%\n\nï¼ˆæ³¨ï¼šæ­¤å¤„åº”æ’å…¥ä¸šåŠ¡æ¿å—æ”¶å…¥ç»“æ„å›¾ï¼Œä½†è´¢åŠ¡ç ”æŠ¥æ±‡æ€»å†…å®¹ä¸­æœªæä¾›ç›¸å…³å›¾ç‰‡è·¯å¾„ï¼‰\n\n### 3.4 è´¢åŠ¡è¡¨ç°ä¸æ ¸å¿ƒæŒ‡æ ‡\næ ¹æ®ä¸œæ–¹è´¢å¯Œæ¸¯è‚¡è´¢åŠ¡æŠ¥è¡¨æ•°æ®[1]ï¼š\n- 2022å¹´è¥ä¸šæ”¶å…¥38.1äº¿å…ƒäººæ°‘å¸ï¼ŒåŒæ¯”å¢é•¿12.3%\n- æ¯›åˆ©ç‡è¾¾69.2%ï¼Œè¾ƒä¸Šå¹´æå‡1.8ä¸ªç™¾åˆ†ç‚¹\n- ç ”å‘æŠ•å…¥28.6äº¿å…ƒï¼Œå æ”¶å…¥æ¯”é‡75.1%\n- å‡€äºæŸæ”¶çª„è‡³60.5äº¿å…ƒï¼ŒåŒæ¯”å‡å°‘13.7%\n\n### 3.5 æ ¸å¿ƒç«äº‰ä¼˜åŠ¿\n1. æŠ€æœ¯å£å’ï¼šæ‹¥æœ‰8,000å¤šé¡¹AIç›¸å…³ä¸“åˆ©ï¼Œå…¨çƒæ’åå‰åˆ—\n2. åŸºç¡€è®¾æ–½ä¼˜åŠ¿ï¼šå»ºæˆäºšæ´²æœ€å¤§AIè®¡ç®—å¹³å°ä¹‹ä¸€ï¼ˆç®—åŠ›è¾¾3.74 exaFLOPSï¼‰\n3. å•†ä¸šåŒ–èƒ½åŠ›ï¼šå·²æœåŠ¡è¶…è¿‡1,200å®¶å®¢æˆ·ï¼ŒåŒ…æ‹¬120å®¶ã€Šè´¢å¯Œã€‹500å¼ºä¼ä¸š\n4. äººæ‰å‚¨å¤‡ï¼šç ”å‘äººå‘˜å æ¯”67%ï¼Œå…¶ä¸­åšå£«å­¦å†è¶…è¿‡300äºº\n\n### 3.6 æˆ˜ç•¥å‘å±•æ–¹å‘\nå…¬å¸è¿‘æœŸé‡ç‚¹å¸ƒå±€ï¼š\n- åŠ å¼ºAIå¤§æ¨¡å‹ç ”å‘ï¼Œæ¨å‡º\"æ—¥æ—¥æ–°SenseNova\"å¤§æ¨¡å‹ä½“ç³»\n- æ‹“å±•æµ·å¤–å¸‚åœºï¼Œå·²åœ¨ä¸œå—äºšã€ä¸­ä¸œç­‰åœ°å»ºç«‹ä¸šåŠ¡\n- æ·±åŒ–è¡Œä¸šåº”ç”¨ï¼Œé‡ç‚¹çªç ´åŒ»ç–—ã€æ•™è‚²ç­‰å‚ç›´é¢†åŸŸ\n- æ¨è¿›AIæŠ€æœ¯æ ‡å‡†åŒ–ï¼Œå‚ä¸åˆ¶å®š30ä½™é¡¹å›½é™…/å›½å®¶æ ‡å‡†",
            "## 4. å…¬å¸æ·±åº¦åˆ†æ\n\n### 4.1 å•†ä¸šæ¨¡å¼è§£æ„\nå•†æ±¤ç§‘æŠ€é‡‡ç”¨\"1ï¼ˆåŸºç¡€ç ”ç©¶ï¼‰+4ï¼ˆè¡Œä¸šåº”ç”¨ï¼‰+Xï¼ˆç”Ÿæ€æ‹“å±•ï¼‰\"çš„å•†ä¸šæ¨¡å¼æ¶æ„[2]ï¼š\n1. **AIåŸºç¡€è®¾æ–½å±‚**ï¼šé€šè¿‡SenseCore AIå¤§è£…ç½®æä¾›ç®—åŠ›æ”¯æ’‘ï¼Œ2022å¹´æ€»ç®—åŠ›è§„æ¨¡çªç ´4.91 exaFLOPSï¼Œå¹´å¤åˆå¢é•¿ç‡è¾¾86%[1]\n2. **è¡Œä¸šåº”ç”¨å±‚**ï¼šè¦†ç›–æ™ºæ…§å•†ä¸šï¼ˆè¥æ”¶å æ¯”32%ï¼‰ã€æ™ºæ…§åŸå¸‚ï¼ˆ28%ï¼‰ã€æ™ºæ…§ç”Ÿæ´»ï¼ˆ25%ï¼‰ã€æ™ºèƒ½æ±½è½¦ï¼ˆ15%ï¼‰å››å¤§æ¿å—[1]\n3. **ç”Ÿæ€æ‰©å±•å±‚**ï¼šå·²å»ºç«‹åŒ…å«800+åˆä½œä¼™ä¼´çš„å¼€å‘è€…ç”Ÿæ€ï¼Œç´¯è®¡äº§ç”Ÿ3.7ä¸‡ä¸ªå•†ä¸šæ¨¡å‹[2]\n\n### 4.2 æŠ€æœ¯å£å’è¯„ä¼°\næ ¸å¿ƒç«äº‰ä¼˜åŠ¿ä½“ç°åœ¨ä¸‰ä¸ªç»´åº¦ï¼š\n- **ä¸“åˆ©å‚¨å¤‡**ï¼šæˆªè‡³2023H1å…¨çƒç´¯è®¡ä¸“åˆ©èµ„äº§12,700ä»¶ï¼Œå…¶ä¸­å‘æ˜ä¸“åˆ©å æ¯”91%ï¼Œåœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸä¸“åˆ©æ•°é‡å…¨çƒç¬¬ä¸€ï¼ˆæ•°æ®æ¥æºï¼šIPlyticsç»Ÿè®¡ï¼‰\n- **ç ”å‘æŠ•å…¥**ï¼š2022å¹´ç ”å‘æ”¯å‡º41.2äº¿å…ƒï¼Œå è¥æ”¶æ¯”é‡è¾¾145%ï¼Œç ”å‘äººå‘˜å æ¯”67%ï¼ˆæ•°æ®æ¥æºï¼šä¸œæ–¹è´¢å¯Œ-æ¸¯è‚¡-è´¢åŠ¡æŠ¥è¡¨[1]ï¼‰\n- **ç®—æ³•æ•ˆèƒ½**ï¼šåœ¨ImageNetç­‰æƒå¨æµ‹è¯•ä¸­ä¿æŒ95.3%çš„è¯†åˆ«å‡†ç¡®ç‡ï¼Œè¾ƒè¡Œä¸šå¹³å‡æ°´å¹³é«˜å‡º7.2ä¸ªç™¾åˆ†ç‚¹\n\n### 4.3 ç ”å‘èƒ½åŠ›åˆ†æ\né‡‡ç”¨ä¸‰çº§ç ”å‘ä½“ç³»ï¼š\n1. **åŸºç¡€ç ”ç©¶é™¢**ï¼š9ä¸ªå®éªŒå®¤ä¸“æ³¨åŸåˆ›ç®—æ³•çªç ´ï¼Œè®ºæ–‡è¢«CVPRç­‰é¡¶ä¼šæ”¶å½•é‡è¿ç»­5å¹´å±…å…¨çƒå‰3\n2. **å·¥ç¨‹åˆ›æ–°ä¸­å¿ƒ**ï¼šå®ç°ç®—æ³•-èŠ¯ç‰‡ååŒä¼˜åŒ–ï¼Œæ¨ç†èƒ½è€—è¾ƒè¡Œä¸šåŸºå‡†é™ä½40%\n3. **äº§ä¸šç ”ç©¶é™¢**ï¼š2022å¹´æ–°å¢è¡Œä¸šè§£å†³æ–¹æ¡ˆ47ä¸ªï¼Œå•†ä¸šåŒ–è½¬åŒ–å‘¨æœŸç¼©çŸ­è‡³8.3ä¸ªæœˆ[1]\n\n### 4.4 å•†ä¸šåŒ–è·¯å¾„éªŒè¯\nå…³é”®è¿›å±•æŒ‡æ ‡ï¼š\n- **æ ‡æ†æ¡ˆä¾‹**ï¼šæ™ºæ…§åŸå¸‚é¡¹ç›®å·²è½åœ°140+åŸå¸‚ï¼Œæ™ºèƒ½æ±½è½¦ä¸šåŠ¡ç­¾çº¦è½¦ä¼å¢è‡³30å®¶[2]\n- **æ”¶å…¥ç»“æ„**ï¼š2022å¹´æ ‡å‡†åŒ–äº§å“æ”¶å…¥å æ¯”æå‡è‡³39%ï¼Œè¾ƒ2020å¹´æå‡21ä¸ªç™¾åˆ†ç‚¹[1]\n- **å®¢æˆ·è´¨é‡**ï¼šå¹´åº¦åˆçº¦ä»·å€¼è¶…åƒä¸‡çš„å®¢æˆ·è¾¾112å®¶ï¼Œå¤è´­ç‡ç»´æŒ82%é«˜ä½ï¼ˆæ•°æ®æ¥æºï¼šå…¬å¸å¹´æŠ¥ï¼‰\n\n### 4.5 é•¿æœŸç«äº‰åŠ›ç ”åˆ¤\nå·®å¼‚åŒ–ä¼˜åŠ¿æ¥æºï¼š\n1. **æ•°æ®é£è½®æ•ˆåº”**ï¼šæ—¥å‡å¤„ç†æ•°æ®é‡è¾¾7.3PBï¼Œå½¢æˆè¡Œä¸šæœ€å¤§è§†è§‰æ•°æ®åº“\n2. **æ”¿ä¼ååŒç½‘ç»œ**ï¼šå‚ä¸åˆ¶å®š16é¡¹å›½å®¶AIæ ‡å‡†ï¼Œæ‰¿æ‹…7ä¸ªå›½å®¶çº§é‡å¤§ç§‘ç ”é¡¹ç›®\n3. **èµ„æœ¬å‚¨å¤‡ä¼˜åŠ¿**ï¼šç°é‡‘åŠç­‰ä»·ç‰©ä½™é¢182äº¿å…ƒï¼Œå¯æ”¯æ’‘5å¹´ä»¥ä¸Šé«˜å¼ºåº¦ç ”å‘[1]\n\né£é™©æç¤ºï¼šæŠ€æœ¯è¿­ä»£é£é™©ï¼ˆæ–°ä¸€ä»£å¤šæ¨¡æ€æ¨¡å‹å†²å‡»ï¼‰ã€è¡Œä¸šæ”¿ç­–é£é™©ï¼ˆæ•°æ®å®‰å…¨æ³•è§„è¶‹ä¸¥ï¼‰ã€å•†ä¸šåŒ–ä¸åŠé¢„æœŸé£é™©ï¼ˆ2022å¹´ç»è°ƒæ•´å‡€äºæŸ59.3äº¿å…ƒ[1]ï¼‰",
            "## 5. è´¢åŠ¡åˆ†æ\n\n### 5.1 æ”¶å…¥å¢é•¿åˆ†æ  \næ ¹æ®ä¸œæ–¹è´¢å¯Œæ¸¯è‚¡è´¢åŠ¡æŠ¥è¡¨æ•°æ®[1]ï¼Œå•†æ±¤ç§‘æŠ€2022å¹´å®ç°è¥ä¸šæ”¶å…¥38.08äº¿å…ƒï¼ŒåŒæ¯”å¢é•¿12.4%ã€‚åˆ†ä¸šåŠ¡æ¿å—çœ‹ï¼š  \n- æ™ºæ…§å•†ä¸šæ¿å—æ”¶å…¥20.53äº¿å…ƒï¼ˆå æ¯”53.9%ï¼‰ï¼ŒåŒæ¯”å¢é•¿9.7%  \n- æ™ºæ…§åŸå¸‚æ¿å—æ”¶å…¥11.62äº¿å…ƒï¼ˆå æ¯”30.5%ï¼‰ï¼ŒåŒæ¯”å¢é•¿18.2%  \n- æ™ºæ…§ç”Ÿæ´»æ¿å—æ”¶å…¥5.93äº¿å…ƒï¼ˆå æ¯”15.6%ï¼‰ï¼ŒåŒæ¯”å¢é•¿6.3%  \n\næ”¶å…¥å¢é•¿ä¸»è¦å—ç›Šäºä¼ä¸šæ•°å­—åŒ–è½¬å‹åŠ é€Ÿï¼ˆæ•°æ®æ¥æºï¼šåŒèŠ±é¡ºä¸»è¥ä»‹ç»[2]ï¼‰ï¼Œä½†å¢é€Ÿè¾ƒ2021å¹´çš„31.4%æ˜æ˜¾æ”¾ç¼“ï¼Œåæ˜ å®è§‚ç»æµå‹åŠ›å¯¹AIè§£å†³æ–¹æ¡ˆé‡‡è´­çš„å½±å“ã€‚\n\n### 5.2 ç›ˆåˆ©èƒ½åŠ›åˆ†æ  \næ¯›åˆ©ç‡å‘ˆç°ç»“æ„æ€§å˜åŒ–ï¼š  \n- ç»¼åˆæ¯›åˆ©ç‡ä»2021å¹´çš„69.7%ä¸‹é™è‡³2022å¹´çš„66.2%  \n- ç¡¬ä»¶äº¤ä»˜å æ¯”æå‡å¯¼è‡´æ™ºæ…§åŸå¸‚ä¸šåŠ¡æ¯›åˆ©ç‡ä¸‹é™5.2ä¸ªç™¾åˆ†ç‚¹  \n- ç ”å‘äººå‘˜è–ªé…¬ä¸Šæ¶¨ä½¿æ™ºæ…§ç”Ÿæ´»ä¸šåŠ¡æ¯›åˆ©ç‡ä¸‹é™3.8ä¸ªç™¾åˆ†ç‚¹  \n\nå‡€åˆ©æ¶¦æŒç»­ä¸ºè´Ÿï¼Œ2022å¹´ç»è°ƒæ•´å‡€äºæŸ14.18äº¿å…ƒï¼ŒäºæŸç‡37.2%ï¼Œè¾ƒ2021å¹´æ‰©å¤§2.1ä¸ªç™¾åˆ†ç‚¹ã€‚ä¸»è¦ç”±äºï¼š  \n1) ç ”å‘è´¹ç”¨ç‡è¾¾45.3%ï¼ˆ17.25äº¿å…ƒï¼‰  \n2) é”€å”®è´¹ç”¨åŒæ¯”å¢é•¿23.6%è‡³8.72äº¿å…ƒ  \n\n### 5.3 ç ”å‘æŠ•å…¥åˆ†æ  \nç ”å‘æ”¯å‡ºå‘ˆç°\"ç»å¯¹é¢ä¸Šå‡ã€å æ¯”ä¸‹é™\"ç‰¹å¾ï¼š  \n- 2022å¹´ç ”å‘æŠ•å…¥17.25äº¿å…ƒï¼ŒåŒæ¯”å¢é•¿11.2%  \n- ç ”å‘è´¹ç”¨ç‡ä»2021å¹´çš„47.3%é™è‡³45.3%  \n- ç ”å‘äººå‘˜æ•°é‡è¾¾3,819äººï¼ˆå å‘˜å·¥æ€»æ•°68%ï¼‰ï¼Œäººå‡ç ”å‘æ”¯å‡º45.2ä¸‡å…ƒ  \n\né‡ç‚¹æŠ•å‘ç”Ÿæˆå¼AIï¼ˆå¦‚æ—¥æ—¥æ–°å¤§æ¨¡å‹ï¼‰ã€è‡ªåŠ¨é©¾é©¶ç­‰å‰æ²¿é¢†åŸŸï¼ˆæ•°æ®æ¥æºï¼šåŒèŠ±é¡ºä¸»è¥ä»‹ç»[2]ï¼‰ã€‚\n\n### 5.4 ç°é‡‘æµçŠ¶å†µ  \nç»è¥æ€§ç°é‡‘æµæŒç»­æ‰¿å‹ï¼š  \n- 2022å¹´ç»è¥æ€§ç°é‡‘å‡€æµå‡º16.24äº¿å…ƒï¼Œè¾ƒ2021å¹´æ‰©å¤§28.6%  \n- åº”æ”¶è´¦æ¬¾å‘¨è½¬å¤©æ•°ä»2021å¹´çš„187å¤©å¢è‡³213å¤©  \n- æœŸæœ«ç°é‡‘åŠç­‰ä»·ç‰©ä½™é¢58.37äº¿å…ƒï¼ŒæŒ‰å½“å‰çƒ§é’±é€Ÿåº¦å¯ç»´æŒ3.6å¹´è¿è¥  \n\n### 5.5 è´¢åŠ¡å¥åº·åº¦è¯„ä¼°  \nåŸºäºZ-scoreæ¨¡å‹æµ‹ç®—å¾—åˆ†ä¸º1.2ï¼Œå¤„äºè­¦æˆ’åŒºé—´ã€‚å…³é”®é£é™©ç‚¹ï¼š  \n1) æµåŠ¨æ¯”ç‡1.3ï¼ŒçŸ­æœŸå¿å€ºå‹åŠ›æ˜¾è‘—  \n2) èµ„äº§è´Ÿå€ºç‡æ”€å‡è‡³48.7%  \n3) æ— å½¢èµ„äº§å æ€»èµ„äº§æ¯”ä¾‹è¾¾34.2%  \n\n### 5.6 æœªæ¥ä¸‰å¹´é¢„æµ‹  \nåŸºäºARIMAæ¨¡å‹é¢„æµ‹ï¼š  \n| æŒ‡æ ‡   | 2023E | 2024E | 2025E |  \n|--------|-------|-------|-------|  \n| è¥æ”¶(äº¿)| 42.7  | 48.3  | 54.6  |  \n| æ¯›åˆ©ç‡ | 64.5% | 65.8% | 67.2% |  \n| å‡€äºæŸ | 12.4  | 9.8   | 6.3   |  \n\nå…³é”®å‡è®¾ï¼š1) å¹´å¤åˆå¢é•¿ç‡12.7%ï¼›2) 2025å¹´å®ç°ç›ˆäºå¹³è¡¡ï¼›3) æ”¿åºœè¡¥è´´ç»´æŒæ¯å¹´3-4äº¿å…ƒæ°´å¹³ã€‚",
            "## 6. è¡Œä¸šå¯¹æ¯”\n\n### 6.1 ç«äº‰æ ¼å±€æ¦‚è¿°\nå•†æ±¤ç§‘æŠ€ä½œä¸ºå…¨çƒé¢†å…ˆçš„äººå·¥æ™ºèƒ½å¹³å°å…¬å¸ï¼Œä¸»è¦ç«äº‰å¯¹æ‰‹åŒ…æ‹¬å›½é™…å·¨å¤´ï¼ˆå¦‚Google DeepMindã€Meta AIï¼‰å’Œå›½å†…å¤´éƒ¨ä¼ä¸šï¼ˆå¦‚æ—·è§†ç§‘æŠ€ã€äº‘ä»ç§‘æŠ€ã€ä¾å›¾ç§‘æŠ€ï¼‰ã€‚æ ¹æ®IDCæœ€æ–°æ•°æ®æ˜¾ç¤ºï¼Œ2023å¹´ä¸­å›½è®¡ç®—æœºè§†è§‰åº”ç”¨å¸‚åœºä»½é¢ä¸­ï¼Œå•†æ±¤ä»¥22.3%çš„å¸‚å ç‡ä¿æŒé¦–ä½ï¼Œä½†è¾ƒ2021å¹´çš„27.1%æœ‰æ‰€ä¸‹æ»‘[1]ã€‚\n\n### 6.2 æ ¸å¿ƒæŠ€æœ¯å¯¹æ¯”\n#### 6.2.1 ç ”å‘æŠ•å…¥å¼ºåº¦\n- å•†æ±¤ç§‘æŠ€ï¼š2023å¹´ç ”å‘æ”¯å‡ºè¾¾32.4äº¿å…ƒï¼Œå è¥æ”¶æ¯”é‡58.7%ï¼ˆæ•°æ®æ¥æºï¼šä¸œæ–¹è´¢å¯Œ-æ¸¯è‚¡-è´¢åŠ¡æŠ¥è¡¨[1]ï¼‰\n- ä¸»è¦ç«äº‰å¯¹æ‰‹ï¼š\n  - æ—·è§†ç§‘æŠ€ï¼šç ”å‘å æ¯”49.2%\n  - äº‘ä»ç§‘æŠ€ï¼šç ”å‘å æ¯”52.1%\n  - Google DeepMindï¼šç ”å‘æŠ•å…¥ç»å¯¹å€¼è¶…200äº¿å…ƒï¼ˆæŒ‰æ±‡ç‡æŠ˜ç®—ï¼‰\n\n#### 6.2.2 ä¸“åˆ©å‚¨å¤‡\næˆªè‡³2023å¹´æœ«ï¼š\n- å•†æ±¤ç´¯è®¡ä¸“åˆ©æˆæƒ4,200+é¡¹ï¼ˆå«1,100+é¡¹å‘æ˜ä¸“åˆ©ï¼‰\n- æ—·è§†ç§‘æŠ€ä¸“åˆ©æ€»æ•°3,700+é¡¹\n- ä¾å›¾ç§‘æŠ€ä¸“åˆ©æ€»æ•°2,900+é¡¹\nï¼ˆæ•°æ®æ¥æºï¼šå›½å®¶çŸ¥è¯†äº§æƒå±€å…¬å¼€æ•°æ®ï¼‰\n\n### 6.3 äº§å“çŸ©é˜µå¯¹æ¯”\n| äº§å“ç»´åº¦       | å•†æ±¤ç§‘æŠ€       | æ—·è§†ç§‘æŠ€       | äº‘ä»ç§‘æŠ€       |\n|----------------|----------------|----------------|----------------|\n| åŸºç¡€ç®—æ³•å¹³å°   | SenseCore      | Brain++        | è½»èˆŸå¹³å°       |\n| å•†ä¸šåŒ–äº§å“çº¿   | 12å¤§è¡Œä¸šæ–¹æ¡ˆ   | 9å¤§è¡Œä¸šæ–¹æ¡ˆ    | 7å¤§è¡Œä¸šæ–¹æ¡ˆ    |\n| æ ‡æ†æ¡ˆä¾‹       | ä¸Šæµ·æ™ºæ…§åŸå¸‚   | åŒ—äº¬å¤§å…´æœºåœº   | å¹¿å·æ”¿åŠ¡äº‘     |\nï¼ˆæ•°æ®æ¥æºï¼šå„å…¬å¸å®˜ç½‘åŠå¹´æŠ¥[2]ï¼‰\n\n### 6.4 è´¢åŠ¡æŒ‡æ ‡å¯¹æ¯”\n#### 6.4.1 å…³é”®è´¢åŠ¡æ¯”ç‡ï¼ˆ2023å¹´åº¦ï¼‰\n| æŒ‡æ ‡           | å•†æ±¤   | è¡Œä¸šå¹³å‡ | æœ€ä¼˜å€¼ï¼ˆæ—·è§†ï¼‰ |\n|----------------|--------|----------|----------------|\n| æ¯›åˆ©ç‡         | 68.2%  | 62.5%    | 71.3%          |\n| è¥æ”¶å¢é•¿ç‡     | 12.7%  | 18.4%    | 23.6%          |\n| ç»è¥æ€§ç°é‡‘æµ   | -9.8äº¿ | -5.2äº¿   | +3.4äº¿         |\nï¼ˆæ•°æ®æ¥æºï¼šä¸œæ–¹è´¢å¯Œ-æ¸¯è‚¡-è´¢åŠ¡æŠ¥è¡¨[1]ï¼‰\n\n#### 6.4.2 å®¢æˆ·ç»“æ„\n- å•†æ±¤ç§‘æŠ€ï¼šæ”¿åºœå®¢æˆ·å æ¯”42%ï¼Œä¼ä¸šå®¢æˆ·58%ï¼ˆæ•°æ®æ¥æºï¼šåŒèŠ±é¡º-ä¸»è¥ä»‹ç»[2]ï¼‰\n- æ—·è§†ç§‘æŠ€ï¼šæ”¿åºœå®¢æˆ·å æ¯”38%\n- äº‘ä»ç§‘æŠ€ï¼šæ”¿åºœå®¢æˆ·å æ¯”51%\n\n### 6.5 ç«äº‰çŸ©é˜µåˆ†æ\né€šè¿‡æ„å»ºå››è±¡é™ç«äº‰çŸ©é˜µï¼ˆæŠ€æœ¯é¢†å…ˆæ€§vså•†ä¸šåŒ–èƒ½åŠ›ï¼‰æ˜¾ç¤ºï¼š\n1. æŠ€æœ¯é¢†å¯¼è€…ï¼šå•†æ±¤ã€DeepMindï¼ˆé«˜ç ”å‘å¯†åº¦+ä¸“åˆ©è´¨é‡ï¼‰\n2. å•†ä¸šè½¬åŒ–å¼ºè€…ï¼šæµ·åº·å¨è§†ã€åä¸ºï¼ˆä½æŠ€æœ¯æŠ•å…¥ä½†é«˜è¥æ”¶è§„æ¨¡ï¼‰\n3. å‡è¡¡å‘å±•è€…ï¼šæ—·è§†ç§‘æŠ€\n4. ç»†åˆ†é¢†åŸŸä¸“å®¶ï¼šäº‘ä»ç§‘æŠ€ï¼ˆæ”¿åŠ¡å¸‚åœºä¼˜åŠ¿ï¼‰\n\n### 6.6 ä¼˜åŠ£åŠ¿æ€»ç»“\n**æ ¸å¿ƒä¼˜åŠ¿ï¼š**\n- å…¨æ ˆå¼AIæŠ€æœ¯ä½“ç³»ï¼ˆèŠ¯ç‰‡+ç®—æ³•+å¹³å°ï¼‰\n- æ™ºæ…§åŸå¸‚é¢†åŸŸå…ˆå‘ä¼˜åŠ¿ï¼ˆå æ”¿åºœé¡¹ç›®ä¸­æ ‡æ•°35%ï¼‰\n- äº§å­¦ç ”ååŒæ•ˆåº”ï¼ˆä¸æ¸¯ä¸­æ–‡ç­‰æœºæ„æ·±åº¦åˆä½œï¼‰\n\n**ä¸»è¦åŠ£åŠ¿ï¼š**\n- æµ·å¤–æ‰©å¼ å—é˜»ï¼ˆç¾å›½å®ä½“æ¸…å•å½±å“ï¼‰\n- ä¼ä¸šç«¯æ¸—é€ç‡ä½äºæ—·è§†ï¼ˆç›¸å·®7.2pctï¼‰\n- ç°é‡‘æµæ‰¿å‹ï¼ˆè¿ç»­5å­£åº¦è´Ÿç»è¥æ€§ç°é‡‘æµï¼‰\n\nï¼ˆæ³¨ï¼šæœ¬éƒ¨åˆ†æ‰€æœ‰æ•°æ®å‡é€šè¿‡è‡ªåŠ¨åŒ–æµç¨‹æ ¡éªŒï¼ŒåŸå§‹æ•°æ®æ¥å£å‚è§é™„å½•Aï¼‰",
            "## 7. ä¼°å€¼ä¸é¢„æµ‹\n\n### 7.1 ä¼°å€¼æ–¹æ³•é€‰æ‹©ä¸æ¨¡å‹æ„å»º\nåŸºäºå…¬å¸æ‰€å¤„è¡Œä¸šç‰¹æ€§å’Œè´¢åŠ¡ç‰¹å¾ï¼Œæœ¬æŠ¥å‘Šé‡‡ç”¨ä¸‰ç§ä¸»æµä¼°å€¼æ–¹æ³•è¿›è¡Œäº¤å‰éªŒè¯ï¼š\n1. **ç°é‡‘æµæŠ˜ç°æ³•ï¼ˆDCFï¼‰**ï¼šé€‚ç”¨äºå…·å¤‡ç¨³å®šç°é‡‘æµç‰¹å¾çš„æˆç†ŸæœŸä¼ä¸šï¼Œæ ¸å¿ƒå‚æ•°åŒ…æ‹¬ï¼š\n   - æ°¸ç»­å¢é•¿ç‡è®¾å®šä¸º2.5%ï¼ˆå‚ç…§æ¸¯è‚¡åŒè¡Œä¸šä¸­ä½æ•°[1]ï¼‰\n   - WACCé‡‡ç”¨10.2%ï¼ˆæ ¹æ®CAPMæ¨¡å‹è®¡ç®—å¾—å‡º[2]ï¼‰\n2. **å¸‚ç›ˆç‡æ³•ï¼ˆPEï¼‰**ï¼šé€‰å–å¯æ¯”å…¬å¸2024å¹´é¢„æµ‹PEå‡å€¼ä¸º15.8å€ï¼ˆæ•°æ®æ¥æºï¼šBloombergåŒä¸šå¯¹æ¯”[3]ï¼‰\n3. **å¸‚é”€ç‡æ³•ï¼ˆPSï¼‰**ï¼šé€‚ç”¨äºé«˜å¢é•¿é˜¶æ®µä¼ä¸šï¼Œè¡Œä¸šå¹³å‡PSä¸º2.1å€ï¼ˆæ•°æ®æ¥æºï¼šWindè¡Œä¸šæ•°æ®åº“[4]ï¼‰\n\n### 7.2 å…³é”®å‚æ•°å‡è®¾\n| å‚æ•°é¡¹       | åŸºå‡†å€¼ | ä¹è§‚æƒ…æ™¯ | æ‚²è§‚æƒ…æ™¯ | æ•°æ®æ¥æº               |\n|--------------|--------|----------|----------|------------------------|\n| è¥æ”¶å¢é•¿ç‡   | 8.5%   | 12.0%    | 5.0%     | ä¸œæ–¹è´¢å¯Œ-æ¸¯è‚¡è´¢åŠ¡æŠ¥è¡¨[1]|\n| æ¯›åˆ©ç‡       | 32.4%  | 35.0%    | 28.0%    | åŒèŠ±é¡º-ä¸»è¥ä»‹ç»[2]     |\n| èµ„æœ¬å¼€æ”¯å æ¯” | 6.2%   | 5.0%     | 8.0%     | å…¬å¸2023å¹´æŠ¥           |\n\n### 7.3 ä¼°å€¼ç»“æœ\né€šè¿‡ä¸‰ç§æ–¹æ³•åŠ æƒè®¡ç®—ï¼ˆæƒé‡åˆ†é…ï¼šDCF 50%ï¼ŒPE 30%ï¼ŒPS 20%ï¼‰ï¼Œå¾—å‡ºå…¬å¸åˆç†ä¼°å€¼åŒºé—´ï¼š\n- **ç›®æ ‡ä»·åŒºé—´**ï¼šHK$25.6-32.4\n- **ä¸­æ¢ä»·å€¼**ï¼šHK$28.9ï¼ˆè¾ƒå½“å‰è‚¡ä»·å­˜åœ¨18.7%ä¸Šè¡Œç©ºé—´ï¼‰\n\n#### åˆ†æƒ…æ™¯æµ‹ç®—ç»“æœï¼š\n1. **åŸºå‡†æƒ…æ™¯**ï¼š\n   - DCFä¼°å€¼ï¼šHK$27.5\n   - PEæ³•ä¼°å€¼ï¼šHK$29.1ï¼ˆæŒ‰15.8å€*2024EPSï¼‰\n   - PSæ³•ä¼°å€¼ï¼šHK$24.8\n\n2. **ä¹è§‚æƒ…æ™¯**ï¼ˆéœ€æ±‚è¶…é¢„æœŸï¼‰ï¼š\n   - ä¼°å€¼ä¸Šé™å¯è¾¾HK$34.2ï¼ˆ+28%ç©ºé—´ï¼‰\n\n3. **æ‚²è§‚æƒ…æ™¯**ï¼ˆæˆæœ¬å‹åŠ›ï¼‰ï¼š\n   - ä¼°å€¼ä¸‹é™ä¸ºHK$21.3ï¼ˆ-20%é£é™©ï¼‰\n\n### 7.4 è‚¡ä»·é©±åŠ¨å› ç´ \n1. **æ ¸å¿ƒå‚¬åŒ–å‰‚**ï¼š\n   - æ–°äº§å“ç®¡çº¿è½åœ°ï¼ˆé¢„è®¡2024Q2æŠ«éœ²[5]ï¼‰\n   - ä¸œå—äºšå¸‚åœºæ‰©å¼ è®¡åˆ’ï¼ˆå…¬å‘Šç¼–å·ï¼š2023-086ï¼‰\n2. **é£é™©å› ç´ **ï¼š\n   - åŸææ–™ä»·æ ¼æ³¢åŠ¨ï¼ˆæ²ªé“æœŸè´§åŒæ¯”+14%[6]ï¼‰\n   - è¡Œä¸šç«äº‰åŠ å‰§ï¼ˆå¸‚åœºä»½é¢å¹´é™1.2pct[7]ï¼‰\n\n### 7.5 æ•æ„Ÿæ€§åˆ†æ\né€šè¿‡è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿæ˜¾ç¤ºï¼š\n- WACCå˜åŠ¨Â±1%å°†å¯¼è‡´ä¼°å€¼æ³¢åŠ¨âˆ“7.2%\n- æ°¸ç»­å¢é•¿ç‡å˜åŠ¨Â±0.5%å¯¹åº”ä¼°å€¼å˜åŒ–âˆ“4.8%\n- æ¯›åˆ©ç‡æ¯æå‡1pctå¯æ¨å‡ä¼°å€¼2.3%ï¼ˆæ•°æ®æ¥æºï¼šDCFæ¨¡å‹æµ‹ç®—ï¼‰\n\nï¼ˆæ³¨ï¼šæ‰€æœ‰ä¼°å€¼ç»“æœå‡åŸºäº2024å¹´3æœˆ31æ—¥æ±‡ç‡1HKD=0.91CNYæ¢ç®—ï¼‰",
            "## 8. æ²»ç†ç»“æ„\n\n### 8.1 å…¬å¸æ²»ç†æ¶æ„\nå…¬å¸å»ºç«‹äº†ç¬¦åˆç°ä»£ä¼ä¸šåˆ¶åº¦çš„æ²»ç†æ¶æ„ï¼Œå½¢æˆè‚¡ä¸œå¤§ä¼šã€è‘£äº‹ä¼šã€ç›‘äº‹ä¼šå’Œç»è¥ç®¡ç†å±‚ç›¸äº’åˆ¶è¡¡çš„å†³ç­–ä½“ç³»ã€‚è‘£äº‹ä¼šä¸‹è®¾æˆ˜ç•¥å§”å‘˜ä¼šã€å®¡è®¡å§”å‘˜ä¼šã€è–ªé…¬ä¸è€ƒæ ¸å§”å‘˜ä¼šç­‰ä¸“é—¨å§”å‘˜ä¼šï¼Œå„ä¸“ä¸šå§”å‘˜ä¼šè¿ä½œè§„èŒƒ[3]ã€‚æ ¹æ®æœ€æ–°æŠ«éœ²ä¿¡æ¯ï¼Œå…¬å¸ç‹¬ç«‹è‘£äº‹å æ¯”è¾¾åˆ°1/3ï¼Œç¬¦åˆæ¸¯äº¤æ‰€ä¸Šå¸‚è§„åˆ™è¦æ±‚ã€‚\n\n### 8.2 ç®¡ç†å›¢é˜Ÿåˆ†æ\næ ¸å¿ƒç®¡ç†å›¢é˜Ÿå¹³å‡ä»ä¸šå¹´é™è¶…è¿‡15å¹´ï¼Œä¸»è¦é«˜ç®¡å‡å…·å¤‡ç›¸å…³è¡Œä¸šèµ„æ·±èƒŒæ™¯ï¼š\n- è‘£äº‹é•¿ï¼šæ‹¥æœ‰20å¹´è¡Œä¸šç®¡ç†ç»éªŒï¼Œæ›¾ä¸»å¯¼å¤šä¸ªé‡å¤§æˆ˜ç•¥é¡¹ç›®\n- CEOï¼šæ›¾ä»»å›½é™…çŸ¥åä¼ä¸šé«˜ç®¡ï¼Œå…·å¤‡å…¨çƒåŒ–è¿è¥è§†é‡\n- CFOï¼šæŒæœ‰æ³¨å†Œä¼šè®¡å¸ˆèµ„æ ¼ï¼Œæ‹¥æœ‰10å¹´ä»¥ä¸Šä¸Šå¸‚å…¬å¸è´¢åŠ¡ç®¡ç†ç»éªŒ\n\nç®¡ç†å›¢é˜Ÿè¿‘ä¸‰å¹´ä¿æŒç¨³å®šï¼Œæœªå‡ºç°æ ¸å¿ƒé«˜ç®¡å¼‚å¸¸å˜åŠ¨æƒ…å†µ[3]ã€‚\n\n### 8.3 è‚¡æƒç»“æ„ä¸æ§åˆ¶æƒ\næˆªè‡³æœ€æ–°æŠ«éœ²ï¼š\n- ç¬¬ä¸€å¤§è‚¡ä¸œæŒè‚¡æ¯”ä¾‹ï¼š35.6%[3]\n- å‰åå¤§è‚¡ä¸œåˆè®¡æŒè‚¡ï¼š68.2%[3]\n- æœºæ„æŠ•èµ„è€…æŒè‚¡æ¯”ä¾‹ï¼š42.5%[3]\n\nè‚¡æƒç»“æ„ç›¸å¯¹é›†ä¸­ï¼Œå­˜åœ¨å®é™…æ§åˆ¶äººï¼Œæœ‰åˆ©äºé‡å¤§å†³ç­–æ•ˆç‡ï¼Œä½†éœ€å…³æ³¨å¤§è‚¡ä¸œæ§åˆ¶é£é™©ã€‚å…¬å¸å·²å»ºç«‹å…³è”äº¤æ˜“å®¡æŸ¥æœºåˆ¶ï¼Œè¿‘å¹´å…³è”äº¤æ˜“å æ¯”ä½äºè¡Œä¸šå¹³å‡æ°´å¹³[1]ã€‚\n\n### 8.4 æ¿€åŠ±çº¦æŸæœºåˆ¶\nå…¬å¸å®æ–½\"é™åˆ¶æ€§è‚¡ç¥¨+ä¸šç»©å¥–é‡‘\"çš„å¤åˆæ¿€åŠ±æ–¹æ¡ˆï¼š\n- é«˜ç®¡è–ªé…¬ä¸­ç»©æ•ˆè–ªé…¬å æ¯”è¾¾60%\n- è¿‘ä¸‰å¹´ç´¯è®¡å®æ–½è‚¡æƒæ¿€åŠ±è®¡åˆ’2æ¬¡ï¼Œè¦†ç›–æ ¸å¿ƒæŠ€æœ¯äººå‘˜30ä½™äºº\n- è®¾ç½®ä¸¥æ ¼çš„ä¸šç»©è€ƒæ ¸æŒ‡æ ‡ï¼ŒåŒ…æ‹¬ROEã€è¥æ”¶å¢é•¿ç‡ç­‰å…³é”®è´¢åŠ¡æŒ‡æ ‡[1]\n\n### 8.5 æ²»ç†é£é™©æç¤º\néœ€é‡ç‚¹å…³æ³¨ï¼š\n1. ç‹¬ç«‹è‘£äº‹å®é™…å±¥èŒæ•ˆæœå¾…è§‚å¯Ÿ\n2. ä¸­å°è‚¡ä¸œæƒç›Šä¿æŠ¤æœºåˆ¶æœ‰å¾…å®Œå–„\n3. å›½é™…åŒ–ä¸šåŠ¡æ‰©å¼ å¸¦æ¥çš„è·¨å¢ƒæ²»ç†æŒ‘æˆ˜\n\næ•´ä½“è€Œè¨€ï¼Œå…¬å¸æ²»ç†ç»“æ„è§„èŒƒï¼Œç®¡ç†å±‚ç¨³å®šæ€§è¾ƒå¥½ï¼Œæ¿€åŠ±çº¦æŸæœºåˆ¶è¾ƒä¸ºå®Œå–„ï¼Œæ²»ç†æ°´å¹³å¤„äºè¡Œä¸šä¸­ä¸Šæ°´å¹³ã€‚å»ºè®®æŒç»­å…³æ³¨æ§åˆ¶æƒé›†ä¸­å¯èƒ½å¸¦æ¥çš„æ²»ç†é£é™©[3]ã€‚",
            "## 9. æŠ•èµ„å»ºè®®\n\nåŸºäºå‰è¿°è´¢åŠ¡åˆ†æã€è¡Œä¸šå¯¹æ ‡åŠä¼°å€¼æ¨¡å‹æµ‹ç®—ç»“æœï¼Œæˆ‘ä»¬ç»™äºˆè¯¥è‚¡\"ä¹°å…¥\"è¯„çº§ï¼Œç›®æ ‡ä»·ä½è®¾å®šä¸º28.5æ¸¯å…ƒï¼Œå»ºè®®æŠ•èµ„æœŸé™ä¸º6-12ä¸ªæœˆã€‚å…·ä½“æŠ•èµ„ç­–ç•¥å»ºè®®å¦‚ä¸‹ï¼š\n\n1. **ä¼°å€¼æ”¯æ’‘**  \n   å½“å‰è‚¡ä»·24.2æ¸¯å…ƒè¾ƒDCFä¼°å€¼ç»“æœï¼ˆ27.8-29.2æ¸¯å…ƒåŒºé—´ï¼‰å­˜åœ¨17.4%çš„æ½œåœ¨ä¸Šæ¶¨ç©ºé—´[1]ã€‚EV/EBITDAå€æ•°ï¼ˆ8.3xï¼‰è¾ƒè¡Œä¸šå‡å€¼ï¼ˆ10.2xï¼‰ä½18.6%ï¼ŒPEGæŒ‡æ ‡ï¼ˆ0.89ï¼‰æ˜¾ç¤ºä¼°å€¼å…·å¤‡å¸å¼•åŠ›[1]ã€‚\n\n2. **å‚¬åŒ–å‰‚**  \n   - é¢„è®¡2024å¹´Q2æ–°äº§çº¿æŠ•äº§åäº§èƒ½æå‡30%ï¼ˆæ•°æ®æ¥æºï¼šåŒèŠ±é¡º-ä¸»è¥ä»‹ç»[2]ï¼‰  \n   - å¤§è‚¡ä¸œè¿‘6ä¸ªæœˆç´¯è®¡å¢æŒ2.15%è‚¡ä»½ï¼ˆæ•°æ®æ¥æºï¼šåŒèŠ±é¡º-è‚¡ä¸œä¿¡æ¯ç½‘é¡µçˆ¬è™«[3]ï¼‰\n\n3. **æ“ä½œå»ºè®®**  \n   - ç°ä»·24.2æ¸¯å…ƒå¯å»ºç«‹åŸºç¡€ä»“ä½ï¼ˆ30%ï¼‰  \n   - è‹¥å›è°ƒè‡³22æ¸¯å…ƒæ”¯æ’‘ä½å¯åŠ ä»“è‡³50%  \n   - ç›®æ ‡ä»·ä½28.5æ¸¯å…ƒåˆ†æ‰¹å‡æŒ  \n   - æ­¢æŸä½è®¾ç½®åœ¨20.8æ¸¯å…ƒï¼ˆè¾ƒç°ä»·ä¸‹æµ®14%ï¼‰\n\n4. **é£é™©æç¤º**  \n   - åŸææ–™ä»·æ ¼æ³¢åŠ¨å¯èƒ½å½±å“æ¯›åˆ©ç‡1.5-2ä¸ªç™¾åˆ†ç‚¹[1]  \n   - è¡Œä¸šæ”¿ç­–å˜åŠ¨é£é™©ï¼ˆéœ€å…³æ³¨2024å¹´Q1æ–°èƒ½æºè¡¥è´´ç»†åˆ™ï¼‰  \n\næœ¬å»ºè®®åŸºäº2023å¹´12æœˆ31æ—¥æ”¶ç›˜æ•°æ®ï¼Œåç»­å°†æ ¹æ®å­£åº¦è´¢æŠ¥åŠé‡å¤§äº‹é¡¹è¿›è¡ŒåŠ¨æ€è°ƒæ•´ã€‚æŠ•èµ„è€…åº”ç»“åˆè‡ªèº«é£é™©æ‰¿å—èƒ½åŠ›ï¼Œå»ºè®®å•ä¸€ä¸ªè‚¡é…ç½®æ¯”ä¾‹ä¸è¶…è¿‡æŠ•èµ„ç»„åˆçš„15%ã€‚",
            "## 10. é£é™©æç¤º\n\n### 10.1 è¡Œä¸šé£é™©\n1. **æŠ€æœ¯è¿­ä»£é£é™©**ï¼šäººå·¥æ™ºèƒ½è¡Œä¸šæŠ€æœ¯æ›´æ–°è¿­ä»£é€Ÿåº¦æå¿«ï¼Œè‹¥å…¬å¸æ— æ³•æŒç»­ä¿æŒæŠ€æœ¯é¢†å…ˆä¼˜åŠ¿ï¼Œå¯èƒ½é¢ä¸´å¸‚åœºä»½é¢è¢«æŒ¤å‹çš„é£é™©ã€‚æ ¹æ®è¡Œä¸šæ•°æ®æ˜¾ç¤ºï¼Œå¤´éƒ¨AIä¼ä¸šçš„å¹´å‡ç ”å‘æŠ•å…¥å¢é•¿ç‡è¶…è¿‡35%[1]ï¼Œç»´æŒæŠ€æœ¯ç«äº‰åŠ›éœ€è¦æŒç»­é«˜é¢ç ”å‘æŠ•å…¥ã€‚\n2. **æ”¿ç­–ç›‘ç®¡é£é™©**ï¼šå…¨çƒèŒƒå›´å†…å¯¹AIæŠ€æœ¯çš„ç›‘ç®¡æ—¥è¶‹ä¸¥æ ¼ï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°æ®éšç§ã€ç®—æ³•ä¼¦ç†ç­‰é¢†åŸŸã€‚ä¸­å›½ã€Šç”Ÿæˆå¼äººå·¥æ™ºèƒ½æœåŠ¡ç®¡ç†æš‚è¡ŒåŠæ³•ã€‹ç­‰æ³•è§„çš„å®æ–½å¯èƒ½å¢åŠ åˆè§„æˆæœ¬[2]ã€‚\n3. **è¡Œä¸šç«äº‰åŠ å‰§**ï¼šæ®ä¸å®Œå…¨ç»Ÿè®¡ï¼Œ2023å¹´ä¸­å›½AIé¢†åŸŸæ–°æ³¨å†Œä¼ä¸šæ•°é‡åŒæ¯”å¢é•¿28%[3]ï¼Œè¡Œä¸šå‘ˆç°çº¢æµ·ç«äº‰æ€åŠ¿ã€‚\n\n### 10.2 å…¬å¸é£é™©\n1. **æŒç»­äºæŸé£é™©**ï¼šè´¢åŠ¡æ•°æ®æ˜¾ç¤ºå…¬å¸è¿‘ä¸‰å¹´ç´¯è®¡äºæŸè¾¾58.7äº¿å…ƒ[1]ï¼Œç»è¥æ€§ç°é‡‘æµæŒç»­ä¸ºè´Ÿï¼Œå­˜åœ¨èµ„é‡‘é“¾å‹åŠ›ã€‚\n2. **å®¢æˆ·é›†ä¸­åº¦é£é™©**ï¼šå‰äº”å¤§å®¢æˆ·è´¡çŒ®è¥æ”¶å æ¯”è¶…è¿‡45%[2]ï¼Œå­˜åœ¨å¤§å®¢æˆ·ä¾èµ–é£é™©ã€‚\n3. **äººæ‰æµå¤±é£é™©**ï¼šAIè¡Œä¸šæ ¸å¿ƒæŠ€æœ¯äººå‘˜æµåŠ¨ç‡é«˜è¾¾25%[3]ï¼Œå…³é”®æŠ€æœ¯äººæ‰æµå¤±å¯èƒ½å½±å“ç ”å‘è¿›åº¦ã€‚\n\n### 10.3 ä¼°å€¼é£é™©\n1. **PSä¼°å€¼åé«˜**ï¼šå½“å‰å¸‚é”€ç‡(PS)è¾¾18.7å€ï¼Œæ˜¾è‘—é«˜äºè¡Œä¸šå¹³å‡11.2å€çš„æ°´å¹³[1]ã€‚\n2. **å•†ä¸šåŒ–ä¸åŠé¢„æœŸ**ï¼šæ™ºæ…§å•†ä¸šä¸šåŠ¡æ”¶å…¥å¢é€Ÿç”±2021å¹´çš„89%é™è‡³2023å¹´çš„32%[2]ï¼Œå•†ä¸šåŒ–è¿›ç¨‹å¯èƒ½ä¸åŠé¢„æœŸã€‚\n3. **æµåŠ¨æ€§é£é™©**ï¼šæ¸¯è‚¡é€šæ ‡çš„è°ƒæ•´å¯èƒ½å¯¼è‡´èµ„é‡‘æµå‡ºï¼Œè¿‘ä¸‰ä¸ªæœˆæ—¥å‡æˆäº¤é‡ç¯æ¯”ä¸‹é™23%[3]ã€‚\n\n### é£é™©çŸ©é˜µè¯„ä¼°\n| é£é™©ç±»åˆ«       | å½±å“ç¨‹åº¦(1-5) | å‘ç”Ÿæ¦‚ç‡(1-5) | é£é™©å€¼ |\n|----------------|---------------|---------------|--------|\n| æŠ€æœ¯è¿­ä»£é£é™©   | 4             | 3             | 12     |\n| æ”¿ç­–ç›‘ç®¡é£é™©   | 3             | 2             | 6      |\n| æŒç»­äºæŸé£é™©   | 5             | 4             | 20     |\n| å®¢æˆ·é›†ä¸­åº¦é£é™© | 3             | 3             | 9      |\n| PSä¼°å€¼åé«˜     | 4             | 3             | 12     |\n\næ³¨ï¼šé£é™©å€¼=å½±å“ç¨‹åº¦Ã—å‘ç”Ÿæ¦‚ç‡ï¼Œåˆ†å€¼è¶Šé«˜é£é™©è¶Šå¤§\n\n## å¼•ç”¨æ–‡çŒ®\n[1] ä¸œæ–¹è´¢å¯Œ-æ¸¯è‚¡-è´¢åŠ¡æŠ¥è¡¨: https://emweb.securities.eastmoney.com/PC_HKF10/FinancialAnalysis/index  \n[2] åŒèŠ±é¡º-ä¸»è¥ä»‹ç»: https://basic.10jqka.com.cn/new/000066/operate.html  \n[3] åŒèŠ±é¡º-è‚¡ä¸œä¿¡æ¯: https://basic.10jqka.com.cn/HK0020/holder.html"
        ]
        return default_template

    def generate_outline(self, use_template: bool = True) -> Optional[List[Dict[str, Any]]]:
        """ç”Ÿæˆç ”æŠ¥å¤§çº²"""
        try:
            if use_template:
                parts = self._load_outline_template()
                self.logger.info("ğŸ“„ ä½¿ç”¨æ¨¡æ¿å¤§çº²")
            else:
                self._setup_agents()
                discuss_count = 0
                parts = []

                while discuss_count < 2:
                    self._agents['outline_opinion'].generate(self.report_info)
                    parts = self._agents['outline'].generate(self.report_info)
                    discuss_count += 1

                if not parts:
                    self.logger.error("âŒ å¤§çº²ç”Ÿæˆå¤±è´¥")
                    return None

            self.report_info.report_outline = parts
            self.logger.info(f"ğŸ“„ å¤§çº²ç”ŸæˆæˆåŠŸï¼Œå…± {len(parts)} ä¸ªéƒ¨åˆ†")
            return parts

        except Exception as e:
            self.logger.error(f"âŒ ç ”æŠ¥å¤§çº²ç”Ÿæˆå¤±è´¥: {e}")
            return None

    def generate_report_content_1(self, report_info: ReportInfo, use_template: bool = False) -> List[str]:

        if use_template:
            return self._load_text_template()

        outline = report_info.report_outline
        self.logger.info("\nâœï¸ å¼€å§‹åˆ†æ®µç”Ÿæˆæ·±åº¦ç ”æŠ¥...")
        report_content = []
        part_all_num = len(outline)
        generated_names = set()
        nodes = self.report_info.has_sub_nodes()
        for idx, part in enumerate(outline):
            node = nodes[idx]

            self.report_info.cur_part_context.cur_part = part
            self.report_info.cur_part_context.is_report_last = (idx == len(outline) - 1)
            part_title = part.get('part_title', f'éƒ¨åˆ†{idx + 1}')

            if node:
                part_title_name = self.report_info.cur_part_context.get_part_title_name()
                report_content.append(f"{part_title_name}")
            else:
                self.report_info.part_rag_context = self.rag_helper.get_context_for_llm(
                    f"{part_title} {self.report_info.target_company}",
                    max_tokens=4000, top_k=10
                )
                discuss_count = 0
                cur_content = ""
                while discuss_count < 2:
                    opinion = self._agents['section_opinion'].generate(self.report_info)
                    report_info.cur_part_context.cur_subsection_content_opinion = opinion
                    cur_content = self._agents['section_edit'].generate(report_info)
                    discuss_count += 1

                report_content.append(cur_content)
            self.logger.info(f"âœ… å·²å®Œæˆï¼š{report_content}")
            report_info.cur_part_context.cur_content = ""
            generated_names.add(part_title)
            self.logger.info(f"âœ… å·²å®Œæˆï¼š{part_title}")
        return report_content

    def _load_abstract_template(self, template_name: str = "default") -> str:

        return ""

    def get_abstract(self, report_info: ReportInfo, use_template: bool = False) -> str:
        if use_template:
            return self._load_abstract_template()
        abstract = self._agents['abstract'].generate(report_info)
        return abstract

    def get_full_report(self, report_info: ReportInfo) -> str:
        content_list = ContentConvert(self.report_info.report_outline).get_content_list_1()
        join = "\n\n".join(content_list)
        # get_content_list = report_info.create_report_content().get_content_list()
        self.logger.info(f"\nâœï¸ ç›®å½•ç”ŸæˆæˆåŠŸ...{join}")
        """è·å–å®Œæ•´æŠ¥å‘Š"""
        try:

            report_text_list = self.generate_report_content_1(report_info, False)
            self.report_info.report_text_list = report_text_list

            abstract = self.get_abstract(report_info,False)

            # æ„å»ºå®Œæ•´æŠ¥å‘Š
            full_report_parts = [
                f"# {self.report_info.report_title}\n",
            ]
            full_report_parts.append(abstract)
            full_report_parts.extend(content_list)
            full_report_parts.extend(report_text_list)

            return "\n\n".join(full_report_parts)

        except Exception as e:
            self.logger.error(f"âŒ ç”Ÿæˆå®Œæ•´æŠ¥å‘Šå¤±è´¥: {e}")
            raise

    def generate_report(self) -> Optional[str]:
        """ç”Ÿæˆå®Œæ•´ç ”æŠ¥"""
        self.logger.info("\n" + "=" * 80)
        self.logger.info("ğŸš€ å¼€å§‹ç ”æŠ¥ç”Ÿæˆæµç¨‹")
        self.logger.info("=" * 80)

        try:
            # åˆå§‹åŒ–ä»£ç†
            self._setup_agents()

            # è·å–RAGä¸Šä¸‹æ–‡
            rag_context = self.rag_helper.get_context_for_llm(
                f"{self.target_company} å…¬å¸åˆ†æ è´¢åŠ¡æ•°æ® è¡Œä¸šåœ°ä½ ç«äº‰åˆ†æ",
                max_tokens=4000, top_k=20
            )
            rag_company = self.rag_helper.get_context_for_llm(
                f"{self.target_company}ç«äº‰å¯¹æ‰‹åˆ†æ",
                max_tokens=4000, top_k=10
            )

            # åˆå§‹åŒ–æŠ¥å‘Šä¿¡æ¯
            self.report_info = ReportInfo(self.target_company, rag_context, rag_company)
            self.report_info.report_title = f"{self.report_info.target_company}ç ”æŠ¥"
            # ç”Ÿæˆå¤§çº²
            outline = self.generate_outline(use_template=False)
            if not outline:
                raise ValueError("å¤§çº²ç”Ÿæˆå¤±è´¥")

            # ç”Ÿæˆå®Œæ•´æŠ¥å‘Š
            final_report = self.get_full_report(self.report_info)

            # ä¿å­˜æŠ¥å‘Š
            timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
            # output_file = f"{self.target_company}æ·±åº¦ç ”æŠ¥_ä¼˜åŒ–ç‰ˆ_{timestamp}.md"
            output_file = f"Company_Research_Report.md"

            with open(output_file, 'w', encoding='utf-8') as f:
                f.write(final_report)

            convert_md_to_docx_pure_python(output_file)


            self.logger.info(f"\nâœ… ç ”æŠ¥ç”Ÿæˆå®Œæˆï¼æ–‡ä»¶å·²ä¿å­˜åˆ°: {output_file}")
            return output_file

        except Exception as e:
            self.logger.error(f"âŒ ç ”æŠ¥ç”Ÿæˆå¤±è´¥: {e}")
            return None


def main():
    """ä¸»å‡½æ•°"""
    import argparse

    parser = argparse.ArgumentParser(description='ç ”æŠ¥ç”Ÿæˆæµç¨‹')
    parser.add_argument('--company_name', default='4Paradigm', help='ç›®æ ‡å…¬å¸åç§°')
    parser.add_argument('--company_code', default='06682.HK', help='è‚¡ç¥¨ä»£ç ')
    parser.add_argument('--template', action='store_true', help='ä½¿ç”¨æ¨¡æ¿å¤§çº²')
    args = parser.parse_args()

    try:
        # åˆ›å»ºç ”æŠ¥ç”Ÿæˆå®ä¾‹
        company_code = args.company_code.split(".")

        pipeline = DataCollectionPipeline(
            target_company=args.company_name,
            target_company_code=company_code[0],
            target_company_market=company_code[1],
            search_engine="all"
        )

        # è¿è¡Œæ•°æ®æ”¶é›†æµç¨‹
        success = pipeline.run_data_collection()

        if success:
            print("\nğŸ‰ æ•°æ®æ”¶é›†æµç¨‹æ‰§è¡Œå®Œæ¯•ï¼")
            print("ğŸ“Š æ‰€æœ‰æ•°æ®å·²å‘é‡åŒ–å­˜å‚¨åˆ°PostgreSQLæ•°æ®åº“")
        else:
            print("\nâŒ æ•°æ®æ”¶é›†æµç¨‹æ‰§è¡Œå¤±è´¥ï¼")


        pipeline = ReportGenerationPipeline(
            target_company=args.company_name,
            target_company_code=company_code[0],
            target_company_market=company_code[1]
        )

        # è¿è¡Œç ”æŠ¥ç”Ÿæˆæµç¨‹
        output_file = pipeline.generate_report()

        if output_file:
            print(f"\nğŸ‰ ç ”æŠ¥ç”Ÿæˆæµç¨‹æ‰§è¡Œå®Œæ¯•ï¼")
            print(f"ğŸ“‹ ç ”æŠ¥æ–‡ä»¶: {output_file}")
        else:
            print("\nâŒ ç ”æŠ¥ç”Ÿæˆæµç¨‹æ‰§è¡Œå¤±è´¥ï¼")

    except Exception as e:
        print(f"\nâŒ ç¨‹åºæ‰§è¡Œå‡ºé”™: {e}")
        return 1

    return 0


if __name__ == "__main__":
    main()